{"remainingRequest":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuzhengwei/SJTU/HCI/CloudWatch/src/components/video/video.vue?vue&type=style&index=0&id=2924a087&lang=stylus&scoped=true&","dependencies":[{"path":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/src/components/video/video.vue","mtime":1592987830847},{"path":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/css-loader/index.js","mtime":1589115288939},{"path":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1589115292369},{"path":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/postcss-loader/src/index.js","mtime":1589115290391},{"path":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/stylus-loader/index.js","mtime":1589115291975},{"path":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/cache-loader/dist/cjs.js","mtime":1589115288536},{"path":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/vue-loader/lib/index.js","mtime":1589115292369}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.detail{\n  padding-left: 15%;\n  padding-right: 15%;\n  padding-top: 5%;\n  height: 65%;\n}\n.full{\n  padding: 0;\n  width: 100.5%;\n  left: -0.25%;\n  height: 95.25%;\n  top: -0.25%;\n}\n.video{\n  width: 100%;\n  height: 97%;\n  margin: 0;\n}\n.buttons{\n  height: 3%;\n}\n.tc-video-container{\n  width: 100%;\n  height: 100%;\n}\n.center{\n  justify-content: center;\n  align-items: center;\n}\n\n.jindutiao{\n  width: 250px;\n  height: 20px;\n  border: black 2px solid;\n}\n\n.jindutiao span{\n  float: left;\n  height: 20px;\n  background: #66afe9;\n}\n",{"version":3,"sources":["video.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"video.vue","sourceRoot":"src/components/video","sourcesContent":["<template>\n    <div id=\"detail\" :class=\"isFull? 'full':'detail'\">\n      <div class=\"video\" v-show=\"showVideo\" >\n        <video\n               :id=\"tcPlayerId\"\n               class=\"tc-video-container\"\n               playsinline\n               webkit-playinline\n               x5-playinline>\n        </video>\n      </div>\n      <template v-if=\"!isFullscreen\">\n        <input type=\"button\" id=\"play\" v-on:click=\"TongBu\" value=\"同步播放\"/>\n        <div class=\"showvideolist\" style=\"margin-top: 5px\">\n          <input type=\"button\" value=\"浏览视频库\" v-on:click=\"showVideoList\"/>\n        </div>\n        <div class=\"videolist\" style=\"margin-top: 5px\" v-show=\"showList\">\n          <ul>\n            <li v-for=\"(item,index) in list\" :key=\"index\" style=\"display: inline-block;margin-left: 10px\">\n              <img :src=\"item.cover\" style=\"width: 80px;height: 80px\" @click=\"changeVideo(item.fileId)\"/>\n              <p>{{item.name}}</p>\n              <p>视频简介：{{item.text}}</p>\n            </li>\n          </ul>\n        </div>\n        <div class=\"\" style=\"margin-top: 5px\">\n          <input id=\"uploadVideoNow-file\" type=\"file\" accept=\"video/*\"/>\n          <input type=\"button\" value=\"上传本地视频\" v-on:click=\"ShangChuan\"/>\n        </div>\n        <div v-show=\"showJindu\">\n          <p>上传进度：</p>\n          <div class=\"jindutiao\">\n            <span v-bind:style=\"{width: jindu+'%'}\"></span>\n          </div>\n        </div>\n      </template>\n    </div>\n</template>\n\n<script>\n    import axios from 'axios'\n    import TcVod from 'vod-js-sdk-v6'\n\n    export default {\n        name: 'TcPlayer',\n        props: {\n            isFullscreen: Boolean,\n        },\n        computed: {\n            isFull: function () {\n                return this.isFullscreen\n            }\n        },\n        data() {\n            return {\n                tcPlayerId: 'tcPlayer' + Date.now(),\n                player: null,\n                RoomId: 'x2RYna',\n                showList:false,\n                showVideo:false,\n                showJindu:false,\n                jindu:0,\n                Fileid: '5285890804272485428',\n                Appid: '1301931404',\n                list: [\n                    {\n                        cover:require('../../assets/image/video.jpg'),\n                        name:'主题曲片花',\n                        fileId:'5285890804129534917',\n                        text:'简介1'\n                    },\n                    {\n                        cover:require('../../assets/image/video.jpg'),\n                        name:'一路向北',\n                        fileId:'5285890804272485428',\n                        text:'简介2'\n                    },\n                    {\n                        cover:require('../../assets/image/video.jpg'),\n                        name:'live',\n                        fileId:'5285890801792789133',\n                        text:'简介3'\n                    },\n                    {\n                        cover:require('../../assets/image/video.jpg'),\n                        name:'浪姐',\n                        fileId:'5285890804347869645',\n                        text:'简介4'\n                    },\n                    {\n                        cover:require('../../assets/image/video.jpg'),\n                        name:'庆佘年',\n                        fileId:'5285890804447813743',\n                        text:'简介5'\n                    },\n                    {\n                        cover:require('../../assets/image/video.jpg'),\n                        name:'浪姐预告',\n                        fileId:'5285890804334475959',\n                        text:'简介6'\n                    }\n                ]\n            }\n        },\n        mounted() {\n            let self = this\n            this.$nextTick(() => {\n                setTimeout(() => {\n                    let videoFileid = this.Fileid\n                    let videoAppid = this.Appid\n                    self.getVideoLang(videoFileid, videoAppid)\n                }, 400)\n            })\n        },\n        methods: {\n            // 初始化腾讯云播放器\n            getVideoLang(fileID, appID) {\n                const playerParam = {\n                    fileID: fileID,\n                    appID: appID\n                }\n                this.player = window.TCPlayer(this.tcPlayerId, playerParam)\n            },\n            playVideo() {\n                let self = this\n                let time = this.player.currentTime()\n                //alert(time)\n                axios.get('http://47.103.30.166:8020/videoroom/play', {\n                    params: {\n                        RoomId: this.RoomId,\n                        curTime: time\n                    }\n                }).then(function (response) {\n                    //alert(response.data)\n                    //if(player.paused){\n                    //  setInterval(pause,5000);\n                    //}\n                    if (Math.abs(response.data - time) > 0.5) {\n                        self.player.currentTime(response.data + 1)\n                    }\n                })\n            },\n            TongBu() {\n                //alert('test')\n                this.player.on('playing', setInterval(this.playvideo, 2000))\n            },\n\n            getSignature() {\n                return axios.post('http://47.103.30.166:8020/videoroom/signature')\n                    .then(function (response) {\n                        //alert(response.data)\n                        console.log(response)\n                        return response.data\n                    })\n            },\n            ShangChuan() {\n                let self = this\n                let file = document.querySelector('input[type=file]')\n                let mediaFile = file.files[0]\n                const tcVod = new TcVod({\n                    getSignature: this.getSignature // 前文中所述的获取上传签名的函数\n                })\n                const uploader = tcVod.upload({\n                    mediaFile: mediaFile, // 媒体文件（视频或音频或图片），类型为 File\n                })\n                uploader.on('media_progress', function (info) {\n                    self.showJindu=true\n                    window.console.log(info.percent) // 进度\n                    self.jindu=info.percent*100\n                })\n                uploader.done().then(function (doneResult) {\n                    self.showJindu=false\n                    self.Fileid=doneResult.fileId\n                    self.player.loadVideoByID({\n                        fileID: self.Fileid, // 请传入需要播放的视频 filID（必须）\n                        appID: self.Appid, // 请传入点播账号的 appID（必须）\n                    })\n                    self.showVideo=true\n                })\n            },\n\n            showVideoList() {\n                this.showList=!this.showList\n            },\n            changeVideo(fileID) {\n                this.Fileid=fileID\n                this.player.loadVideoByID({\n                    fileID: this.Fileid, // 请传入需要播放的视频 filID（必须）\n                    appID: this.Appid, // 请传入点播账号的 appID（必须）\n                })\n                this.showVideo=true\n            }\n        }\n    }\n</script>\n\n<style lang='stylus' scoped>\n  .detail{\n    padding-left: 15%;\n    padding-right: 15%;\n    padding-top: 5%;\n    height: 65%;\n  }\n  .full{\n    padding: 0;\n    width: 100.5%;\n    left: -0.25%;\n    height: 95.25%;\n    top: -0.25%;\n  }\n  .video{\n    width: 100%;\n    height: 97%;\n    margin: 0;\n  }\n  .buttons{\n    height: 3%;\n  }\n  .tc-video-container{\n    width: 100%;\n    height: 100%;\n  }\n  .center{\n    justify-content: center;\n    align-items: center;\n  }\n\n  .jindutiao{\n    width: 250px;\n    height: 20px;\n    border: black 2px solid;\n  }\n\n  .jindutiao span{\n    float: left;\n    height: 20px;\n    background: #66afe9;\n  }\n</style>\n"]}]}