{"remainingRequest":"/run/media/gz/G/c2020spring/hci/project/FrontEnd/node_modules/vue-loader/lib/index.js??vue-loader-options!/run/media/gz/G/c2020spring/hci/project/FrontEnd/src/components/first.vue?vue&type=script&lang=js&","dependencies":[{"path":"/run/media/gz/G/c2020spring/hci/project/FrontEnd/src/components/first.vue","mtime":1592044083322},{"path":"/run/media/gz/G/c2020spring/hci/project/FrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1588990144497},{"path":"/run/media/gz/G/c2020spring/hci/project/FrontEnd/node_modules/babel-loader/lib/index.js","mtime":1588990144242},{"path":"/run/media/gz/G/c2020spring/hci/project/FrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1588990144497},{"path":"/run/media/gz/G/c2020spring/hci/project/FrontEnd/node_modules/vue-loader/lib/index.js","mtime":1588990158440}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from 'axios'\nimport TcVod from 'vod-js-sdk-v6'\n\nexport default {\n  name: 'TcPlayer',\n\n  props: {\n    isFullscreen:Boolean,\n  },\n  computed: {\n    isFull: function () {\n      return this.isFullscreen\n    }\n  },\n  data () {\n    return {\n      tcPlayerId: 'tcPlayer' + Date.now(),\n      player: null,\n      RoomId:'x2RYna'\n    }\n  },\n  mounted () {\n    let self = this\n    this.$nextTick(() => {\n      setTimeout(() => {\n        let videoFileid = '5285890801792789133'\n        let videoAppid = '1301931404'\n        self.getVideoLang(videoFileid, videoAppid)\n      }, 400)\n    })\n  },\n  methods: {\n    // 初始化腾讯云播放器\n    getVideoLang (fileID, appID) {\n      const playerParam = {\n        fileID: fileID,\n        appID: appID\n      }\n      this.player = window.TCPlayer(this.tcPlayerId, playerParam)\n    },\n    playvideo() {\n      let self = this\n      let time = this.player.currentTime()\n      //alert(time)\n      axios.get('http://localhost:8020/videoroom/play',{\n        params:{\n          RoomId: this.RoomId,\n          curTime: time\n        }\n      }).then(function (response) {\n        //alert(response.data)\n        //if(player.paused){\n        //  setInterval(pause,5000);\n        //}\n        //checkplayer();\n        if (Math.abs(response.data-time)>0.5) {\n          self.player.currentTime(response.data+1)\n        }\n      })\n    },\n    tongbu() {\n      //alert('test')\n      this.player.on('playing',setInterval(this.playvideo,2000))\n    },\n    getSignature() {\n      return axios.post(url).then(function (response) {\n        return response.data.signature\n      })\n    },\n    shangchuan() {\n\n    }\n  }\n}\n",{"version":3,"sources":["first.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"first.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"detail\" :class=\"isFull? 'full':'detail'\">\n    <div class=\"video\">\n      <video width=\"\"\n             :id=\"tcPlayerId\"\n             height=\"100%\"\n             class=\"tc-video-container\"\n             playsinline\n             webkit-playinline\n             x5-playinline>\n      </video>\n    </div>\n    <div class=\"center bottoms\">\n      <input type=\"button\" id=\"play\" v-on:click=\"tongbu\" value=\"同步播放\"/>\n      <input type=\"button\" id=\"shangchuan\" v-on:click=\"shangchuan\" value=\"上传本地视频\"/>\n    </div>\n  </div>\n</template>\n\n<script>\n  import axios from 'axios'\n  import TcVod from 'vod-js-sdk-v6'\n\n  export default {\n    name: 'TcPlayer',\n\n    props: {\n      isFullscreen:Boolean,\n    },\n    computed: {\n      isFull: function () {\n        return this.isFullscreen\n      }\n    },\n    data () {\n      return {\n        tcPlayerId: 'tcPlayer' + Date.now(),\n        player: null,\n        RoomId:'x2RYna'\n      }\n    },\n    mounted () {\n      let self = this\n      this.$nextTick(() => {\n        setTimeout(() => {\n          let videoFileid = '5285890801792789133'\n          let videoAppid = '1301931404'\n          self.getVideoLang(videoFileid, videoAppid)\n        }, 400)\n      })\n    },\n    methods: {\n      // 初始化腾讯云播放器\n      getVideoLang (fileID, appID) {\n        const playerParam = {\n          fileID: fileID,\n          appID: appID\n        }\n        this.player = window.TCPlayer(this.tcPlayerId, playerParam)\n      },\n      playvideo() {\n        let self = this\n        let time = this.player.currentTime()\n        //alert(time)\n        axios.get('http://localhost:8020/videoroom/play',{\n          params:{\n            RoomId: this.RoomId,\n            curTime: time\n          }\n        }).then(function (response) {\n          //alert(response.data)\n          //if(player.paused){\n          //  setInterval(pause,5000);\n          //}\n          //checkplayer();\n          if (Math.abs(response.data-time)>0.5) {\n            self.player.currentTime(response.data+1)\n          }\n        })\n      },\n      tongbu() {\n        //alert('test')\n        this.player.on('playing',setInterval(this.playvideo,2000))\n      },\n      getSignature() {\n        return axios.post(url).then(function (response) {\n          return response.data.signature\n        })\n      },\n      shangchuan() {\n\n      }\n    }\n  }\n</script>\n\n<style lang='stylus' scoped>\n  .detail{\n    padding-left: 15%;\n    padding-right: 15%;\n    height: 85%;\n  }\n  .full{\n    padding: 0;\n    width: 100.5%;\n    left: -0.25%;\n    height: 95.25%;\n    top: -0.25%;\n\n  }\n  .video{\n    width: 100%;\n    height: 97%;\n    margin: 0;\n  }\n  .buttons{\n    height: 3%;\n  }\n  .tc-video-container{\n    width: 100%;\n    height: 100%;\n  }\n  .center{\n    justify-content: center;\n    align-items: center;\n  }\n</style>"]}]}