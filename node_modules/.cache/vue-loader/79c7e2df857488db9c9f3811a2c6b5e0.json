{"remainingRequest":"D:\\HCI\\github\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HCI\\github\\src\\components\\conversation\\conversationProfile\\user-profile.vue?vue&type=style&index=0&id=809108c8&lang=stylus&scoped=true&","dependencies":[{"path":"D:\\HCI\\github\\src\\components\\conversation\\conversationProfile\\user-profile.vue","mtime":1589122703605},{"path":"D:\\HCI\\github\\node_modules\\css-loader\\index.js","mtime":1589122692960},{"path":"D:\\HCI\\github\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1589122702781},{"path":"D:\\HCI\\github\\node_modules\\postcss-loader\\src\\index.js","mtime":1589122698492},{"path":"D:\\HCI\\github\\node_modules\\stylus-loader\\index.js","mtime":1589122702034},{"path":"D:\\HCI\\github\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589122691350},{"path":"D:\\HCI\\github\\node_modules\\vue-loader\\lib\\index.js","mtime":1589122702780}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.profile-user\r\n  width 100%\r\n  text-align center\r\n  padding 0 20px\r\n  .avatar\r\n    width 160px\r\n    height 160px\r\n    border-radius 50%\r\n    margin 30px auto\r\n  .nick-name\r\n    width 100%\r\n    color $base\r\n    font-size 20px\r\n    font-weight bold\r\n    text-shadow $font-dark 0 0 0.1em\r\n    .anonymous\r\n      color $first\r\n      text-shadow none\r\n  .gender\r\n    padding 5px 0 10px 0\r\n    border-bottom 1px solid $border-base\r\n  .btn-add-blacklist\r\n    color $danger\r\n",{"version":3,"sources":["user-profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user-profile.vue","sourceRoot":"src/components/conversation/conversationProfile","sourcesContent":["<template>\r\n  <div class=\"profile-user\">\r\n    <avatar :title=userProfile.userID :src=\"userProfile.avatar\" />\r\n    <div class=\"nick-name text-ellipsis\">\r\n      <span v-if=\"userProfile.nick\" :title=userProfile.nick>\r\n        {{ userProfile.nick }}\r\n      </span>\r\n      <span v-else class=\"anonymous\" title=\"该用户未设置昵称\">\r\n        [Anonymous]\r\n      </span>\r\n    </div>\r\n    <div class=\"gender\" v-if=\"genderClass\">\r\n      <span :title=\"gender\" class=\"iconfont\" :class=\"genderClass\"></span>\r\n    </div>\r\n    <el-button\r\n      title=\"将该用户加入黑名单\"\r\n      type=\"text\"\r\n      @click=\"addToBlackList\"\r\n      v-if=\"!isInBlacklist && userProfile.userID !== myUserID\"\r\n      class=\"btn-add-blacklist\"\r\n      >加入黑名单</el-button\r\n    >\r\n    <el-button title=\"将该用户移出黑名单\" type=\"text\" @click=\"removeFromBlacklist\" v-else-if=\"isInBlacklist\">移出黑名单</el-button>\r\n    <!-- 拉黑 和 反拉黑 -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  props: {\r\n    userProfile: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      blacklist: state => state.blacklist.blacklist,\r\n      myUserID: state => state.user.currentUserProfile.userID\r\n    }),\r\n    isInBlacklist() {\r\n      return this.blacklist.findIndex(item => item.userID === this.userProfile.userID) >= 0\r\n    },\r\n    gender() {\r\n      switch (this.userProfile.gender) {\r\n        case this.TIM.TYPES.GENDER_MALE:\r\n          return '男'\r\n        case this.TIM.TYPES.GENDER_FEMALE:\r\n          return '女'\r\n        default:\r\n          return '未设置'\r\n      }\r\n    },\r\n    genderClass() {\r\n      switch (this.userProfile.gender) {\r\n        case this.TIM.TYPES.GENDER_MALE:\r\n          return 'icon-male'\r\n        case this.TIM.TYPES.GENDER_FEMALE:\r\n          return 'icon-female'\r\n        default:\r\n          return ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    addToBlackList() {\r\n      this.tim\r\n        .addToBlacklist({ userIDList: [this.userProfile.userID] })\r\n        .then(() => {\r\n          this.$store.dispatch('getBlacklist')\r\n        })\r\n        .catch(imError => {\r\n          this.$store.commit('showMessage', {\r\n            message: imError.message,\r\n            type: 'error'\r\n          })\r\n        })\r\n    },\r\n    removeFromBlacklist() {\r\n      this.tim.removeFromBlacklist({ userIDList: [this.userProfile.userID] }).then(() => {\r\n        this.$store.commit('removeFromBlacklist', this.userProfile.userID)\r\n      })\r\n      .catch(error => {\r\n          this.$store.commit('showMessage', {\r\n            type: 'error',\r\n            message: error.message\r\n          })\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.profile-user\r\n  width 100%\r\n  text-align center\r\n  padding 0 20px\r\n  .avatar\r\n    width 160px\r\n    height 160px\r\n    border-radius 50%\r\n    margin 30px auto\r\n  .nick-name\r\n    width 100%\r\n    color $base\r\n    font-size 20px\r\n    font-weight bold\r\n    text-shadow $font-dark 0 0 0.1em\r\n    .anonymous\r\n      color $first\r\n      text-shadow none\r\n  .gender\r\n    padding 5px 0 10px 0\r\n    border-bottom 1px solid $border-base\r\n  .btn-add-blacklist\r\n    color $danger\r\n</style>\r\n"]}]}