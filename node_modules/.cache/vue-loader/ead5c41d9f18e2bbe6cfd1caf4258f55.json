{"remainingRequest":"D:\\HCI\\github\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HCI\\github\\src\\components\\group\\group-list.vue?vue&type=style&index=0&id=bf2d6268&lang=stylus&scoped=true&","dependencies":[{"path":"D:\\HCI\\github\\src\\components\\group\\group-list.vue","mtime":1589122703608},{"path":"D:\\HCI\\github\\node_modules\\css-loader\\index.js","mtime":1589122692960},{"path":"D:\\HCI\\github\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1589122702781},{"path":"D:\\HCI\\github\\node_modules\\postcss-loader\\src\\index.js","mtime":1589122698492},{"path":"D:\\HCI\\github\\node_modules\\stylus-loader\\index.js","mtime":1589122702034},{"path":"D:\\HCI\\github\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589122691350},{"path":"D:\\HCI\\github\\node_modules\\vue-loader\\lib\\index.js","mtime":1589122702780}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.list-container\r\n  height 100%\r\n  width 100%\r\n  display flex\r\n  flex-direction column\r\n  .group-container \r\n    overflow-y scroll\r\n  .header-bar\r\n    display: flex;\r\n    flex-shrink 0\r\n    height 50px\r\n    border-bottom 1px solid $background-deep-dark\r\n    padding 10px 10px 10px 20px\r\n    .group-seach-bar\r\n      width 100%\r\n      margin-right 10px\r\n      >>> .el-input\r\n        input\r\n          color $first\r\n          border none\r\n          border-radius 30px\r\n          background-color $deep-background !important\r\n          &::placeholder\r\n            color $font-dark\r\n        .el-icon-search\r\n          color $font-dark\r\n    button\r\n      float right\r\n      display: inline-block;\r\n      cursor: pointer;\r\n      background $background-deep-dark\r\n      border: none\r\n      color: $font-dark;\r\n      box-sizing: border-box;\r\n      transition: .3s;\r\n      -moz-user-select: none;\r\n      -webkit-user-select: none;\r\n      -ms-user-select: none;\r\n      margin: 0\r\n      padding 0\r\n      width 30px\r\n      height 30px\r\n      line-height 34px\r\n      font-size: 24px;\r\n      text-align: center;\r\n      white-space: nowrap;\r\n      border-radius: 50%\r\n      outline 0\r\n      flex-shrink 0\r\n      &:hover\r\n        transform: rotate(360deg);\r\n        color $light-primary\r\n  .scroll-container\r\n    overflow-y scroll\r\n    flex 1\r\n\r\n",{"version":3,"sources":["group-list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"group-list.vue","sourceRoot":"src/components/group","sourcesContent":["<template>\r\n  <div class=\"list-container\">\r\n    <div class=\"header-bar\">\r\n      <el-autocomplete\r\n        :value-key=\"'groupID'\"\r\n        :debounce=\"500\"\r\n        size=\"mini\"\r\n        v-model=\"groupID\"\r\n        placeholder=\"输入群ID搜索\"\r\n        :fetch-suggestions=\"searchGroupByID\"\r\n        class=\"group-seach-bar\"\r\n        prefix-icon=\"el-icon-search\"\r\n        :hide-loading=\"hideSearchLoading\"\r\n        @input=\"hideSearchLoading = false\"\r\n        @select=\"applyJoinGroup\"\r\n      ></el-autocomplete>\r\n      <button title=\"创建群组\" @click=\"showCreateGroupModel\">\r\n        <i class=\"tim-icon-add\"></i>\r\n      </button>\r\n    </div>\r\n    <div class=\"group-container\">\r\n      <group-item v-for=\"group in groupList\" :key=\"group.groupID\" :group=\"group\" />\r\n      <el-dialog title=\"创建群组\" :visible=\"createGroupModelVisible\" @close=\"closeCreateGroupModel\" width=\"30%\">\r\n        <create-group></create-group>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport { Dialog, Autocomplete } from 'element-ui'\r\nimport CreateGroup from './create-group.vue'\r\nimport GroupItem from './group-item.vue'\r\nexport default {\r\n  data() {\r\n    return {\r\n      groupID: '',\r\n      hideSearchLoading: true\r\n    }\r\n  },\r\n  components: {\r\n    GroupItem,\r\n    ElDialog: Dialog,\r\n    CreateGroup,\r\n    ElAutocomplete: Autocomplete\r\n  },\r\n  computed: {\r\n    groupList: function() {\r\n      return this.$store.state.group.groupList\r\n    },\r\n    ...mapState({\r\n      createGroupModelVisible: state => {\r\n        return state.group.createGroupModelVisible\r\n      }\r\n    })\r\n  },\r\n  methods: {\r\n    onGroupUpdated(groupList) {\r\n      this.$store.dispatch('updateGroupList', groupList)\r\n    },\r\n    createGroup() {},\r\n    closeCreateGroupModel() {\r\n      this.$store.commit('updateCreateGroupModelVisible', false)\r\n    },\r\n    searchGroupByID(queryString, showInSearchResult) {\r\n      if (queryString.trim().length > 0) {\r\n        this.hideSearchLoading = false\r\n        this.tim\r\n          .searchGroupByID(queryString)\r\n          .then(({ data: { group } }) => {\r\n            showInSearchResult([group])\r\n          })\r\n          .catch(() => {\r\n            this.$store.commit('showMessage', {\r\n              message: '没有找到该群',\r\n              type: 'error'\r\n            })\r\n          })\r\n      } else {\r\n        this.hideSearchLoading = true\r\n      }\r\n    },\r\n    showCreateGroupModel() {\r\n      this.$store.commit('updateCreateGroupModelVisible', true)\r\n    },\r\n    applyJoinGroup(group) {\r\n      this.tim\r\n        .joinGroup({ groupID: group.groupID })\r\n        .then(async res => {\r\n          switch(res.data.status) {\r\n            case this.TIM.TYPES.JOIN_STATUS_WAIT_APPROVAL:\r\n              this.$store.commit('showMessage', {\r\n                message: '申请成功，等待群管理员确认。',\r\n                type: 'info'\r\n              })\r\n              break\r\n            case this.TIM.TYPES.JOIN_STATUS_SUCCESS:\r\n              await this.$store.dispatch(\r\n                'checkoutConversation',\r\n                `GROUP${res.data.group.groupID}`\r\n              )\r\n              this.$store.commit('showMessage', {\r\n                message: '加群成功',\r\n                type: 'success'\r\n              })\r\n              break\r\n            case this.TIM.TYPES.JOIN_STATUS_ALREADY_IN_GROUP:\r\n              this.$store.commit('showMessage', {\r\n                message: '您已经是群成员了，请勿重复加群哦！',\r\n                type: 'info'\r\n              })\r\n              break\r\n            default: break\r\n          }\r\n        })\r\n        .catch(error => {\r\n          this.$store.commit('showMessage', {\r\n            message: error.message,\r\n            type: 'error'\r\n          })\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.list-container\r\n  height 100%\r\n  width 100%\r\n  display flex\r\n  flex-direction column\r\n  .group-container \r\n    overflow-y scroll\r\n  .header-bar\r\n    display: flex;\r\n    flex-shrink 0\r\n    height 50px\r\n    border-bottom 1px solid $background-deep-dark\r\n    padding 10px 10px 10px 20px\r\n    .group-seach-bar\r\n      width 100%\r\n      margin-right 10px\r\n      >>> .el-input\r\n        input\r\n          color $first\r\n          border none\r\n          border-radius 30px\r\n          background-color $deep-background !important\r\n          &::placeholder\r\n            color $font-dark\r\n        .el-icon-search\r\n          color $font-dark\r\n    button\r\n      float right\r\n      display: inline-block;\r\n      cursor: pointer;\r\n      background $background-deep-dark\r\n      border: none\r\n      color: $font-dark;\r\n      box-sizing: border-box;\r\n      transition: .3s;\r\n      -moz-user-select: none;\r\n      -webkit-user-select: none;\r\n      -ms-user-select: none;\r\n      margin: 0\r\n      padding 0\r\n      width 30px\r\n      height 30px\r\n      line-height 34px\r\n      font-size: 24px;\r\n      text-align: center;\r\n      white-space: nowrap;\r\n      border-radius: 50%\r\n      outline 0\r\n      flex-shrink 0\r\n      &:hover\r\n        transform: rotate(360deg);\r\n        color $light-primary\r\n  .scroll-container\r\n    overflow-y scroll\r\n    flex 1\r\n\r\n</style>\r\n"]}]}