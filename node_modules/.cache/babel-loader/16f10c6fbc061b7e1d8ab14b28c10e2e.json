{"remainingRequest":"D:\\HCI\\github\\node_modules\\babel-loader\\lib\\index.js!D:\\HCI\\github\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\HCI\\github\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HCI\\github\\src\\components\\video\\video.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HCI\\github\\src\\components\\video\\video.vue","mtime":1592895555760},{"path":"D:\\HCI\\github\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589122691350},{"path":"D:\\HCI\\github\\node_modules\\babel-loader\\lib\\index.js","mtime":1589122690916},{"path":"D:\\HCI\\github\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589122691350},{"path":"D:\\HCI\\github\\node_modules\\vue-loader\\lib\\index.js","mtime":1589122702780}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport TcVod from 'vod-js-sdk-v6';\nexport default {\n  name: 'TcPlayer',\n  props: {\n    isFullscreen: Boolean\n  },\n  computed: {\n    isFull: function isFull() {\n      return this.isFullscreen;\n    }\n  },\n  data: function data() {\n    return {\n      tcPlayerId: 'tcPlayer' + Date.now(),\n      player: null,\n      RoomId: 'x2RYna',\n      showList: false,\n      showVideo: false,\n      showJindu: false,\n      jindu: 0,\n      Fileid: '5285890804272485428',\n      Appid: '1301931404',\n      list: [{\n        cover: require(\"../../assets/image/video.jpg\"),\n        name: '主题曲片花',\n        fileId: '5285890804129534917',\n        text: '简介1'\n      }, {\n        cover: require(\"../../assets/image/video.jpg\"),\n        name: '一路向北',\n        fileId: '5285890804272485428',\n        text: '简介2'\n      }, {\n        cover: require(\"../../assets/image/video.jpg\"),\n        name: 'live',\n        fileId: '5285890801792789133',\n        text: '简介3'\n      }, {\n        cover: require(\"../../assets/image/video.jpg\"),\n        name: '浪姐',\n        fileId: '5285890804347869645',\n        text: '简介4'\n      }, {\n        cover: require(\"../../assets/image/video.jpg\"),\n        name: '庆佘年',\n        fileId: '5285890804347869645',\n        text: '简介5'\n      }]\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    var self = this;\n    this.$nextTick(function () {\n      setTimeout(function () {\n        var videoFileid = _this.Fileid;\n        var videoAppid = _this.Appid;\n        self.getVideoLang(videoFileid, videoAppid);\n      }, 400);\n    });\n  },\n  methods: {\n    // 初始化腾讯云播放器\n    getVideoLang: function getVideoLang(fileID, appID) {\n      var playerParam = {\n        fileID: fileID,\n        appID: appID\n      };\n      this.player = window.TCPlayer(this.tcPlayerId, playerParam);\n    },\n    playVideo: function playVideo() {\n      var self = this;\n      var time = this.player.currentTime(); //alert(time)\n\n      axios.get('http://47.103.30.166:8020/videoroom/play', {\n        params: {\n          RoomId: this.RoomId,\n          curTime: time\n        }\n      }).then(function (response) {\n        //alert(response.data)\n        //if(player.paused){\n        //  setInterval(pause,5000);\n        //}\n        if (Math.abs(response.data - time) > 0.5) {\n          self.player.currentTime(response.data + 1);\n        }\n      });\n    },\n    TongBu: function TongBu() {\n      //alert('test')\n      this.player.on('playing', setInterval(this.playvideo, 2000));\n    },\n    getSignature: function getSignature() {\n      return axios.post('http://47.103.30.166:8020/videoroom/signature').then(function (response) {\n        //alert(response.data)\n        return response.data;\n      });\n    },\n    ShangChuan: function ShangChuan() {\n      var self = this;\n      var file = document.querySelector('input[type=file]');\n      var mediaFile = file.files[0];\n      var tcVod = new TcVod({\n        getSignature: this.getSignature // 前文中所述的获取上传签名的函数\n\n      });\n      var uploader = tcVod.upload({\n        mediaFile: mediaFile // 媒体文件（视频或音频或图片），类型为 File\n\n      });\n      uploader.on('media_progress', function (info) {\n        self.showJindu = true;\n        window.console.log(info.percent); // 进度\n\n        self.jindu = info.percent * 100;\n      });\n      uploader.done().then(function (doneResult) {\n        self.showJindu = false;\n        self.Fileid = doneResult.fileId;\n        self.player.loadVideoByID({\n          fileID: self.Fileid,\n          // 请传入需要播放的视频 filID（必须）\n          appID: self.Appid // 请传入点播账号的 appID（必须）\n\n        });\n        self.showVideo = true;\n      });\n    },\n    showVideoList: function showVideoList() {\n      this.showList = !this.showList;\n    },\n    changeVideo: function changeVideo(fileID) {\n      this.Fileid = fileID;\n      this.player.loadVideoByID({\n        fileID: this.Fileid,\n        // 请传入需要播放的视频 filID（必须）\n        appID: this.Appid // 请传入点播账号的 appID（必须）\n\n      });\n      this.showVideo = true;\n    }\n  }\n};",{"version":3,"sources":["video.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div id=\"detail\" :class=\"isFull? 'full':'detail'\">\r\n        <div class=\"showvideolist\" style=\"margin-top: 5px\">\r\n            <input type=\"button\" value=\"浏览视频库\" v-on:click=\"showVideoList\"/>\r\n        </div>\r\n        <div class=\"videolist\" style=\"margin-top: 5px\" v-show=\"showList\">\r\n            <ul>\r\n                <li v-for=\"(item,index) in list\" :key=\"index\" style=\"display: inline-block;margin-left: 10px\">\r\n                    <img :src=\"item.cover\" style=\"width: 80px;height: 80px\" @click=\"changeVideo(item.fileId)\"/>\r\n                    <p>{{item.name}}</p>\r\n                    <p>视频简介：{{item.text}}</p>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n        <div class=\"center bottoms\" style=\"margin-top: 5px\">\r\n            <input id=\"uploadVideoNow-file\" type=\"file\" accept=\"video/*\"/>\r\n            <input type=\"button\" value=\"上传本地视频\" v-on:click=\"ShangChuan\"/>\r\n        </div>\r\n        <div v-show=\"showJindu\">\r\n            <p>上传进度：</p>\r\n            <div class=\"jindutiao\">\r\n                <span v-bind:style=\"{width: jindu+'%'}\"></span>\r\n            </div>\r\n        </div>\r\n        <div class=\"video\" style=\"margin-top: 5px\" v-show=\"showVideo\" >\r\n            <video width=\"640\"\r\n                   :id=\"tcPlayerId\"\r\n                   height=\"480\"\r\n                   class=\"tc-video-container\"\r\n                   playsinline\r\n                   webkit-playinline\r\n                   x5-playinline>\r\n            </video>\r\n            <input type=\"button\" id=\"play\" v-on:click=\"TongBu\" value=\"同步播放\"/>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import axios from 'axios'\r\n    import TcVod from 'vod-js-sdk-v6'\r\n\r\n    export default {\r\n        name: 'TcPlayer',\r\n        props: {\r\n            isFullscreen: Boolean,\r\n        },\r\n        computed: {\r\n            isFull: function () {\r\n                return this.isFullscreen\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                tcPlayerId: 'tcPlayer' + Date.now(),\r\n                player: null,\r\n                RoomId: 'x2RYna',\r\n                showList:false,\r\n                showVideo:false,\r\n                showJindu:false,\r\n                jindu:0,\r\n                Fileid: '5285890804272485428',\r\n                Appid: '1301931404',\r\n                list: [\r\n                    {\r\n                        cover:require('../../assets/image/video.jpg'),\r\n                        name:'主题曲片花',\r\n                        fileId:'5285890804129534917',\r\n                        text:'简介1'\r\n                    },\r\n                    {\r\n                        cover:require('../../assets/image/video.jpg'),\r\n                        name:'一路向北',\r\n                        fileId:'5285890804272485428',\r\n                        text:'简介2'\r\n                    },\r\n                    {\r\n                        cover:require('../../assets/image/video.jpg'),\r\n                        name:'live',\r\n                        fileId:'5285890801792789133',\r\n                        text:'简介3'\r\n                    },\r\n                    {\r\n                        cover:require('../../assets/image/video.jpg'),\r\n                        name:'浪姐',\r\n                        fileId:'5285890804347869645',\r\n                        text:'简介4'\r\n                    },\r\n                    {\r\n                        cover:require('../../assets/image/video.jpg'),\r\n                        name:'庆佘年',\r\n                        fileId:'5285890804347869645',\r\n                        text:'简介5'\r\n                    }\r\n                ]\r\n            }\r\n        },\r\n        mounted() {\r\n            let self = this\r\n            this.$nextTick(() => {\r\n                setTimeout(() => {\r\n                    let videoFileid = this.Fileid\r\n                    let videoAppid = this.Appid\r\n                    self.getVideoLang(videoFileid, videoAppid)\r\n                }, 400)\r\n            })\r\n        },\r\n        methods: {\r\n            // 初始化腾讯云播放器\r\n            getVideoLang(fileID, appID) {\r\n                const playerParam = {\r\n                    fileID: fileID,\r\n                    appID: appID\r\n                }\r\n                this.player = window.TCPlayer(this.tcPlayerId, playerParam)\r\n            },\r\n            playVideo() {\r\n                let self = this\r\n                let time = this.player.currentTime()\r\n                //alert(time)\r\n                axios.get('http://47.103.30.166:8020/videoroom/play', {\r\n                    params: {\r\n                        RoomId: this.RoomId,\r\n                        curTime: time\r\n                    }\r\n                }).then(function (response) {\r\n                    //alert(response.data)\r\n                    //if(player.paused){\r\n                    //  setInterval(pause,5000);\r\n                    //}\r\n                    if (Math.abs(response.data - time) > 0.5) {\r\n                        self.player.currentTime(response.data + 1)\r\n                    }\r\n                })\r\n            },\r\n            TongBu() {\r\n                //alert('test')\r\n                this.player.on('playing', setInterval(this.playvideo, 2000))\r\n            },\r\n\r\n            getSignature() {\r\n                return axios.post('http://47.103.30.166:8020/videoroom/signature')\r\n                    .then(function (response) {\r\n                        //alert(response.data)\r\n                        return response.data\r\n                    })\r\n            },\r\n            ShangChuan() {\r\n                let self = this\r\n                let file = document.querySelector('input[type=file]')\r\n                let mediaFile = file.files[0]\r\n                const tcVod = new TcVod({\r\n                    getSignature: this.getSignature // 前文中所述的获取上传签名的函数\r\n                })\r\n                const uploader = tcVod.upload({\r\n                    mediaFile: mediaFile, // 媒体文件（视频或音频或图片），类型为 File\r\n                })\r\n                uploader.on('media_progress', function (info) {\r\n                    self.showJindu=true\r\n                    window.console.log(info.percent) // 进度\r\n                    self.jindu=info.percent*100\r\n                })\r\n                uploader.done().then(function (doneResult) {\r\n                    self.showJindu=false\r\n                    self.Fileid=doneResult.fileId\r\n                    self.player.loadVideoByID({\r\n                        fileID: self.Fileid, // 请传入需要播放的视频 filID（必须）\r\n                        appID: self.Appid, // 请传入点播账号的 appID（必须）\r\n                    })\r\n                    self.showVideo=true\r\n                })\r\n            },\r\n\r\n            showVideoList() {\r\n                this.showList=!this.showList\r\n            },\r\n            changeVideo(fileID) {\r\n                this.Fileid=fileID\r\n                this.player.loadVideoByID({\r\n                    fileID: this.Fileid, // 请传入需要播放的视频 filID（必须）\r\n                    appID: this.Appid, // 请传入点播账号的 appID（必须）\r\n                })\r\n                this.showVideo=true\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n\r\n<style>\r\n.jindutiao{\r\n    width: 250px;\r\n    height: 20px;\r\n    border: black 2px solid;\r\n}\r\n.jindutiao span{\r\n    float: left;\r\n    height: 20px;\r\n    background: #66afe9;\r\n}\r\n</style>\r\n\r\n"],"sourceRoot":"src/components/video"}]}