{"remainingRequest":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/babel-loader/lib/index.js!/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuzhengwei/SJTU/HCI/CloudWatch/src/components/first.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/src/components/first.vue","mtime":1591966149682},{"path":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/cache-loader/dist/cjs.js","mtime":1589115288536},{"path":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/babel-loader/lib/index.js","mtime":1589115288422},{"path":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/cache-loader/dist/cjs.js","mtime":1589115288536},{"path":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/vue-loader/lib/index.js","mtime":1589115292369}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport TcVod from 'vod-js-sdk-v6';\nexport default {\n  name: 'TcPlayer',\n  props: {\n    isFullscreen: Boolean\n  },\n  computed: {\n    isFull: function isFull() {\n      return this.isFullscreen;\n    }\n  },\n  data: function data() {\n    return {\n      tcPlayerId: 'tcPlayer' + Date.now(),\n      player: null,\n      RoomId: 'x2RYna'\n    };\n  },\n  mounted: function mounted() {\n    var self = this;\n    this.$nextTick(function () {\n      setTimeout(function () {\n        var videoFileid = '5285890801792789133';\n        var videoAppid = '1301931404';\n        self.getVideoLang(videoFileid, videoAppid);\n      }, 400);\n    });\n  },\n  methods: {\n    // 初始化腾讯云播放器\n    getVideoLang: function getVideoLang(fileID, appID) {\n      var playerParam = {\n        fileID: fileID,\n        appID: appID\n      };\n      this.player = window.TCPlayer(this.tcPlayerId, playerParam);\n    },\n    playvideo: function playvideo() {\n      var self = this;\n      var time = this.player.currentTime(); //alert(time)\n\n      axios.get('http://localhost:8020/videoroom/play', {\n        params: {\n          RoomId: this.RoomId,\n          curTime: time\n        }\n      }).then(function (response) {\n        //alert(response.data)\n        //if(player.paused){\n        //  setInterval(pause,5000);\n        //}\n        //checkplayer();\n        if (Math.abs(response.data - time) > 0.5) {\n          self.player.currentTime(response.data + 1);\n        }\n      });\n    },\n    tongbu: function tongbu() {\n      //alert('test')\n      this.player.on('playing', setInterval(this.playvideo, 2000));\n    },\n    getSignature: function getSignature() {\n      return axios.post(url).then(function (response) {\n        return response.data.signature;\n      });\n    },\n    shangchuan: function shangchuan() {}\n  }\n};",{"version":3,"sources":["first.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAoBA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,KAAA,MAAA,eAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,YAAA,EAAA;AADA,GAHA;AAMA,EAAA,QAAA,EAAA;AACA,IAAA,MAAA,EAAA,kBAAA;AACA,aAAA,KAAA,YAAA;AACA;AAHA,GANA;AAWA,EAAA,IAXA,kBAWA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,aAAA,IAAA,CAAA,GAAA,EADA;AAEA,MAAA,MAAA,EAAA,IAFA;AAGA,MAAA,MAAA,EAAA;AAHA,KAAA;AAKA,GAjBA;AAkBA,EAAA,OAlBA,qBAkBA;AACA,QAAA,IAAA,GAAA,IAAA;AACA,SAAA,SAAA,CAAA,YAAA;AACA,MAAA,UAAA,CAAA,YAAA;AACA,YAAA,WAAA,GAAA,qBAAA;AACA,YAAA,UAAA,GAAA,YAAA;AACA,QAAA,IAAA,CAAA,YAAA,CAAA,WAAA,EAAA,UAAA;AACA,OAJA,EAIA,GAJA,CAAA;AAKA,KANA;AAOA,GA3BA;AA4BA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,YAFA,wBAEA,MAFA,EAEA,KAFA,EAEA;AACA,UAAA,WAAA,GAAA;AACA,QAAA,MAAA,EAAA,MADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAAA;AAIA,WAAA,MAAA,GAAA,MAAA,CAAA,QAAA,CAAA,KAAA,UAAA,EAAA,WAAA,CAAA;AACA,KARA;AASA,IAAA,SATA,uBASA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,UAAA,IAAA,GAAA,KAAA,MAAA,CAAA,WAAA,EAAA,CAFA,CAGA;;AACA,MAAA,KAAA,CAAA,GAAA,CAAA,sCAAA,EAAA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,MAAA,EAAA,KAAA,MADA;AAEA,UAAA,OAAA,EAAA;AAFA;AADA,OAAA,EAKA,IALA,CAKA,UAAA,QAAA,EAAA;AACA;AACA;AACA;AACA;AACA;AACA,YAAA,IAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA,GAAA,IAAA,IAAA,GAAA,EAAA;AACA,UAAA,IAAA,CAAA,MAAA,CAAA,WAAA,CAAA,QAAA,CAAA,IAAA,GAAA,CAAA;AACA;AACA,OAdA;AAeA,KA5BA;AA6BA,IAAA,MA7BA,oBA6BA;AACA;AACA,WAAA,MAAA,CAAA,EAAA,CAAA,SAAA,EAAA,WAAA,CAAA,KAAA,SAAA,EAAA,IAAA,CAAA;AACA,KAhCA;AAiCA,IAAA,YAjCA,0BAiCA;AACA,aAAA,KAAA,CAAA,IAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,eAAA,QAAA,CAAA,IAAA,CAAA,SAAA;AACA,OAFA,CAAA;AAGA,KArCA;AAsCA,IAAA,UAtCA,wBAsCA,CAEA;AAxCA;AA5BA,CAAA","sourcesContent":["<template>\n  <div id=\"detail\" :class=\"isFull? 'full':'detail'\">\n    <div class=\"video\">\n      <video width=\"\"\n             :id=\"tcPlayerId\"\n             height=\"100%\"\n             class=\"tc-video-container\"\n             playsinline\n             webkit-playinline\n             x5-playinline>\n      </video>\n    </div>\n    <div class=\"center bottoms\">\n      <input type=\"button\" id=\"play\" v-on:click=\"tongbu\" value=\"同步播放\"/>\n      <input type=\"button\" id=\"shangchuan\" v-on:click=\"shangchuan\" value=\"上传本地视频\"/>\n    </div>\n  </div>\n</template>\n\n<script>\n  import axios from 'axios'\n  import TcVod from 'vod-js-sdk-v6'\n\n  export default {\n    name: 'TcPlayer',\n\n    props: {\n      isFullscreen:Boolean,\n    },\n    computed: {\n      isFull: function () {\n        return this.isFullscreen\n      }\n    },\n    data () {\n      return {\n        tcPlayerId: 'tcPlayer' + Date.now(),\n        player: null,\n        RoomId:'x2RYna'\n      }\n    },\n    mounted () {\n      let self = this\n      this.$nextTick(() => {\n        setTimeout(() => {\n          let videoFileid = '5285890801792789133'\n          let videoAppid = '1301931404'\n          self.getVideoLang(videoFileid, videoAppid)\n        }, 400)\n      })\n    },\n    methods: {\n      // 初始化腾讯云播放器\n      getVideoLang (fileID, appID) {\n        const playerParam = {\n          fileID: fileID,\n          appID: appID\n        }\n        this.player = window.TCPlayer(this.tcPlayerId, playerParam)\n      },\n      playvideo() {\n        let self = this\n        let time = this.player.currentTime()\n        //alert(time)\n        axios.get('http://localhost:8020/videoroom/play',{\n          params:{\n            RoomId: this.RoomId,\n            curTime: time\n          }\n        }).then(function (response) {\n          //alert(response.data)\n          //if(player.paused){\n          //  setInterval(pause,5000);\n          //}\n          //checkplayer();\n          if (Math.abs(response.data-time)>0.5) {\n            self.player.currentTime(response.data+1)\n          }\n        })\n      },\n      tongbu() {\n        //alert('test')\n        this.player.on('playing',setInterval(this.playvideo,2000))\n      },\n      getSignature() {\n        return axios.post(url).then(function (response) {\n          return response.data.signature\n        })\n      },\n      shangchuan() {\n\n      }\n    }\n  }\n</script>\n\n<style lang='stylus' scoped>\n  .detail{\n    padding-left: 15%;\n    padding-right: 15%;\n    padding-top: 5%;\n    height: 80%;\n  }\n  .full{\n    padding: 0;\n    width: 100.5%;\n    left: -0.25%;\n    height: 95.25%;\n    top: -0.25%;\n\n  }\n  .video{\n    width: 100%;\n    height: 97%;\n    margin: 0;\n  }\n  .buttons{\n    height: 3%;\n  }\n  .tc-video-container{\n    width: 100%;\n    height: 100%;\n  }\n  .center{\n    justify-content: center;\n    align-items: center;\n  }\n</style>"],"sourceRoot":"src/components"}]}