{"remainingRequest":"D:\\HCI\\github\\node_modules\\babel-loader\\lib\\index.js!D:\\HCI\\github\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\HCI\\github\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HCI\\github\\src\\components\\message\\message-elements\\custom-element.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HCI\\github\\src\\components\\message\\message-elements\\custom-element.vue","mtime":1589122703612},{"path":"D:\\HCI\\github\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589122691350},{"path":"D:\\HCI\\github\\node_modules\\babel-loader\\lib\\index.js","mtime":1589122690916},{"path":"D:\\HCI\\github\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589122691350},{"path":"D:\\HCI\\github\\node_modules\\vue-loader\\lib\\index.js","mtime":1589122702780}],"contextDependencies":[],"result":["import _Rate2 from \"element-ui/lib/theme-chalk/rate.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Rate from \"element-ui/lib/rate\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport MessageBubble from \"../message-bubble\";\nimport { ACTION } from \"../../../utils/trtcCustomMessageMap\";\nimport { formatDuration } from \"../../../utils/formatDuration\";\nexport default {\n  name: 'CustomElement',\n  props: {\n    payload: {\n      type: Object,\n      required: true\n    },\n    message: {\n      type: Object,\n      required: true\n    },\n    isMine: {\n      type: Boolean\n    }\n  },\n  components: {\n    MessageBubble: MessageBubble,\n    ElRate: _Rate\n  },\n  computed: {\n    text: function text() {\n      return this.translateCustomMessage(this.payload);\n    },\n    rate: function rate() {\n      return parseInt(this.payload.description);\n    }\n  },\n  methods: {\n    translateCustomMessage: function translateCustomMessage(payload) {\n      var videoPayload = {};\n\n      try {\n        videoPayload = JSON.parse(payload.data);\n      } catch (e) {\n        videoPayload = {};\n      }\n\n      if (payload.data === 'group_create') {\n        return \"\".concat(payload.extension);\n      }\n\n      switch (videoPayload.action) {\n        case ACTION.VIDEO_CALL_ACTION_DIALING:\n          return '[请求通话]';\n\n        case ACTION.VIDEO_CALL_ACTION_SPONSOR_CANCEL:\n          return '[取消通话]';\n\n        case ACTION.VIDEO_CALL_ACTION_REJECT:\n          return '[拒绝通话]';\n\n        case ACTION.VIDEO_CALL_ACTION_SPONSOR_TIMEOUT:\n          return '[无应答]';\n\n        case ACTION.VIDEO_CALL_ACTION_ACCEPTED:\n          return '[开始通话]';\n\n        case ACTION.VIDEO_CALL_ACTION_HANGUP:\n          return \"[\\u7ED3\\u675F\\u901A\\u8BDD\\uFF0C\\u901A\\u8BDD\\u65F6\\u957F\\uFF1A\".concat(formatDuration(videoPayload.duration), \"]\");\n\n        case ACTION.VIDEO_CALL_ACTION_LINE_BUSY:\n          return '[正在通话中]';\n\n        case ACTION.VIDEO_CALL_ACTION_ERROR:\n          return '[设备异常]';\n\n        default:\n          return '[自定义消息]';\n      }\n    }\n  }\n};",{"version":3,"sources":["custom-element.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAoBA,OAAA,aAAA;AAEA,SAAA,MAAA;AACA,SAAA,cAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,eADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KALA;AASA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AATA,GAFA;AAeA,EAAA,UAAA,EAAA;AACA,IAAA,aAAA,EAAA,aADA;AAEA,IAAA,MAAA;AAFA,GAfA;AAmBA,EAAA,QAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,aAAA,KAAA,sBAAA,CAAA,KAAA,OAAA,CAAA;AACA,KAHA;AAIA,IAAA,IAJA,kBAIA;AACA,aAAA,QAAA,CAAA,KAAA,OAAA,CAAA,WAAA,CAAA;AACA;AANA,GAnBA;AA2BA,EAAA,OAAA,EAAA;AACA,IAAA,sBADA,kCACA,OADA,EACA;AACA,UAAA,YAAA,GAAA,EAAA;;AACA,UAAA;AACA,QAAA,YAAA,GAAA,IAAA,CAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,OAFA,CAEA,OAAA,CAAA,EAAA;AACA,QAAA,YAAA,GAAA,EAAA;AACA;;AACA,UAAA,OAAA,CAAA,IAAA,KAAA,cAAA,EAAA;AACA,yBAAA,OAAA,CAAA,SAAA;AACA;;AACA,cAAA,YAAA,CAAA,MAAA;AACA,aAAA,MAAA,CAAA,yBAAA;AACA,iBAAA,QAAA;;AACA,aAAA,MAAA,CAAA,gCAAA;AACA,iBAAA,QAAA;;AACA,aAAA,MAAA,CAAA,wBAAA;AACA,iBAAA,QAAA;;AACA,aAAA,MAAA,CAAA,iCAAA;AACA,iBAAA,OAAA;;AACA,aAAA,MAAA,CAAA,0BAAA;AACA,iBAAA,QAAA;;AACA,aAAA,MAAA,CAAA,wBAAA;AACA,wFAAA,cAAA,CAAA,YAAA,CAAA,QAAA,CAAA;;AACA,aAAA,MAAA,CAAA,2BAAA;AACA,iBAAA,SAAA;;AACA,aAAA,MAAA,CAAA,uBAAA;AACA,iBAAA,QAAA;;AACA;AACA,iBAAA,SAAA;AAlBA;AAoBA;AA/BA;AA3BA,CAAA","sourcesContent":["<template>\r\n<message-bubble :isMine=isMine :message=message>\r\n  <div class=\"custom-element-wrapper\">\r\n    <div class=\"survey\"  v-if=\"this.payload.data === 'survey'\">\r\n      <div class=\"title\">对IM DEMO的评分和建议</div>\r\n      <el-rate\r\n          v-model=\"rate\"\r\n          disabled\r\n          show-score\r\n          text-color=\"#ff9900\"\r\n          score-template=\"{value}\">\r\n      </el-rate>\r\n      <div class=\"suggestion\">{{this.payload.extension}}</div>\r\n    </div>\r\n    <span class=\"text\" title=\"您可以自行解析自定义消息\" v-else>{{text}}</span>\r\n  </div>\r\n</message-bubble>\r\n</template>\r\n\r\n<script>\r\nimport MessageBubble from '../message-bubble'\r\nimport { Rate } from 'element-ui'\r\nimport { ACTION } from '../../../utils/trtcCustomMessageMap'\r\nimport { formatDuration } from '../../../utils/formatDuration'\r\n\r\nexport default {\r\n  name: 'CustomElement',\r\n  props: {\r\n    payload: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    message: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    isMine: {\r\n      type: Boolean\r\n    }\r\n  },\r\n  components: {\r\n    MessageBubble,\r\n    ElRate: Rate\r\n  },\r\n  computed: {\r\n    text() {\r\n      return this.translateCustomMessage(this.payload)\r\n    },\r\n    rate() {\r\n      return parseInt(this.payload.description)\r\n    }\r\n  },\r\n  methods: {\r\n    translateCustomMessage(payload) {\r\n      let videoPayload = {}\r\n      try{\r\n        videoPayload = JSON.parse(payload.data)\r\n      } catch(e) {\r\n        videoPayload = {}\r\n      }\r\n      if (payload.data === 'group_create') {\r\n        return `${payload.extension}`\r\n      }\r\n      switch (videoPayload.action) {\r\n        case ACTION.VIDEO_CALL_ACTION_DIALING:\r\n          return '[请求通话]'\r\n        case ACTION.VIDEO_CALL_ACTION_SPONSOR_CANCEL:\r\n          return '[取消通话]'\r\n        case ACTION.VIDEO_CALL_ACTION_REJECT:\r\n          return '[拒绝通话]'\r\n        case ACTION.VIDEO_CALL_ACTION_SPONSOR_TIMEOUT:\r\n          return '[无应答]'\r\n        case ACTION.VIDEO_CALL_ACTION_ACCEPTED:\r\n          return '[开始通话]'\r\n        case ACTION.VIDEO_CALL_ACTION_HANGUP:\r\n          return `[结束通话，通话时长：${formatDuration(videoPayload.duration)}]`\r\n        case ACTION.VIDEO_CALL_ACTION_LINE_BUSY:\r\n          return '[正在通话中]'\r\n        case ACTION.VIDEO_CALL_ACTION_ERROR:\r\n          return '[设备异常]'\r\n        default:\r\n          return '[自定义消息]'\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.text\r\n  font-weight bold\r\n.title\r\n  font-size 16px\r\n  font-weight 600\r\n  padding-bottom 10px\r\n.survey\r\n  background-color white\r\n  color black\r\n  padding 20px\r\n  display flex\r\n  flex-direction column\r\n.suggestion\r\n  padding-top 10px\r\n  font-size 14px\r\n</style>\r\n"],"sourceRoot":"src/components/message/message-elements"}]}