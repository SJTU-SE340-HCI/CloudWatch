{"remainingRequest":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/babel-loader/lib/index.js!/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuzhengwei/SJTU/HCI/CloudWatch/src/components/video/video.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/src/components/video/video.vue","mtime":1592291300467},{"path":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/cache-loader/dist/cjs.js","mtime":1589115288536},{"path":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/babel-loader/lib/index.js","mtime":1589115288422},{"path":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/cache-loader/dist/cjs.js","mtime":1589115288536},{"path":"/Users/liuzhengwei/SJTU/HCI/CloudWatch/node_modules/vue-loader/lib/index.js","mtime":1589115292369}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nimport TcVod from 'vod-js-sdk-v6';\nexport default {\n  name: 'TcPlayer',\n  props: {\n    isFullscreen: Boolean\n  },\n  computed: {\n    isFull: function isFull() {\n      return this.isFullscreen;\n    }\n  },\n  data: function data() {\n    return {\n      tcPlayerId: 'tcPlayer' + Date.now(),\n      player: null,\n      RoomId: 'x2RYna'\n    };\n  },\n  mounted: function mounted() {\n    var self = this;\n    this.$nextTick(function () {\n      setTimeout(function () {\n        var videoFileid = '5285890804129534917';\n        var videoAppid = '1301931404';\n        self.getVideoLang(videoFileid, videoAppid);\n      }, 400);\n    });\n  },\n  methods: {\n    // 初始化腾讯云播放器\n    getVideoLang: function getVideoLang(fileID, appID) {\n      var playerParam = {\n        fileID: fileID,\n        appID: appID\n      };\n      this.player = window.TCPlayer(this.tcPlayerId, playerParam);\n    },\n    playvideo: function playvideo() {\n      var self = this;\n      var time = this.player.currentTime(); //alert(time)\n\n      axios.get('http://localhost:8020/videoroom/play', {\n        params: {\n          RoomId: this.RoomId,\n          curTime: time\n        }\n      }).then(function (response) {\n        //alert(response.data)\n        //if(player.paused){\n        //  setInterval(pause,5000);\n        //}\n        //checkplayer();\n        if (Math.abs(response.data - time) > 0.5) {\n          self.player.currentTime(response.data + 1);\n        }\n      });\n    },\n    tongbu: function tongbu() {\n      //alert('test')\n      this.player.on('playing', setInterval(this.playvideo, 2000));\n    },\n    getSignature: function getSignature() {\n      return axios.post('http://localhost:8020/videoroom/signature').then(function (response) {\n        //alert(response.data)\n        return response.data;\n      });\n    },\n    shangchuan: function shangchuan() {\n      var file = document.querySelector('input[type=file]');\n      var mediaFile = file.files[0];\n      var tcVod = new TcVod({\n        getSignature: this.getSignature // 前文中所述的获取上传签名的函数\n\n      });\n      var uploader = tcVod.upload({\n        mediaFile: mediaFile // 媒体文件（视频或音频或图片），类型为 File\n\n      });\n      uploader.on('media_progress', function (info) {\n        window.console.log(info.percent); // 进度\n      });\n    }\n  }\n};",{"version":3,"sources":["video.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAqBA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,KAAA,MAAA,eAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,YAAA,EAAA;AADA,GAFA;AAKA,EAAA,QAAA,EAAA;AACA,IAAA,MAAA,EAAA,kBAAA;AACA,aAAA,KAAA,YAAA;AACA;AAHA,GALA;AAUA,EAAA,IAVA,kBAUA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,aAAA,IAAA,CAAA,GAAA,EADA;AAEA,MAAA,MAAA,EAAA,IAFA;AAGA,MAAA,MAAA,EAAA;AAHA,KAAA;AAKA,GAhBA;AAiBA,EAAA,OAjBA,qBAiBA;AACA,QAAA,IAAA,GAAA,IAAA;AACA,SAAA,SAAA,CAAA,YAAA;AACA,MAAA,UAAA,CAAA,YAAA;AACA,YAAA,WAAA,GAAA,qBAAA;AACA,YAAA,UAAA,GAAA,YAAA;AACA,QAAA,IAAA,CAAA,YAAA,CAAA,WAAA,EAAA,UAAA;AACA,OAJA,EAIA,GAJA,CAAA;AAKA,KANA;AAOA,GA1BA;AA2BA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,YAFA,wBAEA,MAFA,EAEA,KAFA,EAEA;AACA,UAAA,WAAA,GAAA;AACA,QAAA,MAAA,EAAA,MADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAAA;AAIA,WAAA,MAAA,GAAA,MAAA,CAAA,QAAA,CAAA,KAAA,UAAA,EAAA,WAAA,CAAA;AACA,KARA;AASA,IAAA,SATA,uBASA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,UAAA,IAAA,GAAA,KAAA,MAAA,CAAA,WAAA,EAAA,CAFA,CAGA;;AACA,MAAA,KAAA,CAAA,GAAA,CAAA,sCAAA,EAAA;AACA,QAAA,MAAA,EAAA;AACA,UAAA,MAAA,EAAA,KAAA,MADA;AAEA,UAAA,OAAA,EAAA;AAFA;AADA,OAAA,EAKA,IALA,CAKA,UAAA,QAAA,EAAA;AACA;AACA;AACA;AACA;AACA;AACA,YAAA,IAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA,GAAA,IAAA,IAAA,GAAA,EAAA;AACA,UAAA,IAAA,CAAA,MAAA,CAAA,WAAA,CAAA,QAAA,CAAA,IAAA,GAAA,CAAA;AACA;AACA,OAdA;AAeA,KA5BA;AA6BA,IAAA,MA7BA,oBA6BA;AACA;AACA,WAAA,MAAA,CAAA,EAAA,CAAA,SAAA,EAAA,WAAA,CAAA,KAAA,SAAA,EAAA,IAAA,CAAA;AACA,KAhCA;AAkCA,IAAA,YAlCA,0BAkCA;AACA,aAAA,KAAA,CAAA,IAAA,CAAA,2CAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA;AACA,eAAA,QAAA,CAAA,IAAA;AACA,OAJA,CAAA;AAKA,KAxCA;AAyCA,IAAA,UAzCA,wBAyCA;AACA,UAAA,IAAA,GAAA,QAAA,CAAA,aAAA,CAAA,kBAAA,CAAA;AACA,UAAA,SAAA,GAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,UAAA,KAAA,GAAA,IAAA,KAAA,CAAA;AACA,QAAA,YAAA,EAAA,KAAA,YADA,CACA;;AADA,OAAA,CAAA;AAGA,UAAA,QAAA,GAAA,KAAA,CAAA,MAAA,CAAA;AACA,QAAA,SAAA,EAAA,SADA,CACA;;AADA,OAAA,CAAA;AAGA,MAAA,QAAA,CAAA,EAAA,CAAA,gBAAA,EAAA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA,EADA,CACA;AACA,OAFA;AAGA;AArDA;AA3BA,CAAA","sourcesContent":["<template>\n    <div id=\"detail\" :class=\"isFull? 'full':'detail'\">\n        <div class=\"video\">\n            <video width=\"640\"\n                   :id=\"tcPlayerId\"\n                   height=\"480\"\n                   class=\"tc-video-container\"\n                   playsinline\n                   webkit-playinline\n                   x5-playinline>\n            </video>\n        </div>\n        <div class=\"center bottoms\">\n            <input type=\"button\" id=\"play\" v-on:click=\"tongbu\" value=\"同步播放\"/>\n            <input id=\"uploadVideoNow-file\" type=\"file\"  accept=\"video/*\"/>\n            <input type=\"button\" value=\"上传本地视频\" v-on:click=\"shangchuan\"/>\n        </div>\n    </div>\n</template>\n\n<script>\n    import axios from 'axios'\n    import TcVod from 'vod-js-sdk-v6'\n\n    export default {\n        name: 'TcPlayer',\n        props: {\n            isFullscreen: Boolean,\n        },\n        computed: {\n            isFull: function () {\n                return this.isFullscreen\n            }\n        },\n        data() {\n            return {\n                tcPlayerId: 'tcPlayer' + Date.now(),\n                player: null,\n                RoomId: 'x2RYna'\n            }\n        },\n        mounted() {\n            let self = this\n            this.$nextTick(() => {\n                setTimeout(() => {\n                    let videoFileid = '5285890804129534917'\n                    let videoAppid = '1301931404'\n                    self.getVideoLang(videoFileid, videoAppid)\n                }, 400)\n            })\n        },\n        methods: {\n            // 初始化腾讯云播放器\n            getVideoLang(fileID, appID) {\n                const playerParam = {\n                    fileID: fileID,\n                    appID: appID\n                }\n                this.player = window.TCPlayer(this.tcPlayerId, playerParam)\n            },\n            playvideo() {\n                let self = this\n                let time = this.player.currentTime()\n                //alert(time)\n                axios.get('http://localhost:8020/videoroom/play', {\n                    params: {\n                        RoomId: this.RoomId,\n                        curTime: time\n                    }\n                }).then(function (response) {\n                    //alert(response.data)\n                    //if(player.paused){\n                    //  setInterval(pause,5000);\n                    //}\n                    //checkplayer();\n                    if (Math.abs(response.data - time) > 0.5) {\n                        self.player.currentTime(response.data + 1)\n                    }\n                })\n            },\n            tongbu() {\n                //alert('test')\n                this.player.on('playing', setInterval(this.playvideo, 2000))\n            },\n\n            getSignature() {\n                return axios.post('http://localhost:8020/videoroom/signature')\n                    .then(function (response) {\n                        //alert(response.data)\n                        return response.data\n                    })\n            },\n            shangchuan() {\n                let file = document.querySelector('input[type=file]')\n                let mediaFile = file.files[0]\n                const tcVod = new TcVod({\n                    getSignature: this.getSignature // 前文中所述的获取上传签名的函数\n                })\n                const uploader = tcVod.upload({\n                    mediaFile: mediaFile, // 媒体文件（视频或音频或图片），类型为 File\n                })\n                uploader.on('media_progress', function (info) {\n                    window.console.log(info.percent) // 进度\n                })\n            }\n        }\n    }\n</script>\n\n\n<style lang='stylus' scoped>\n  .detail{\n    padding-left: 15%;\n    padding-right: 15%;\n    height: 85%;\n  }\n  .full{\n    padding: 0;\n    width: 100.5%;\n    left: -0.25%;\n    height: 95.25%;\n    top: -0.25%;\n\n  }\n  .video{\n    width: 100%;\n    height: 97%;\n    margin: 0;\n  }\n  .buttons{\n    height: 3%;\n  }\n  .tc-video-container{\n    width: 100%;\n    height: 100%;\n  }\n  .center{\n    justify-content: center;\n    align-items: center;\n  }\n</style>\n"],"sourceRoot":"src/components/video"}]}