{"remainingRequest":"D:\\HCI\\github\\node_modules\\babel-loader\\lib\\index.js!D:\\HCI\\github\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\HCI\\github\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HCI\\github\\src\\components\\conversation\\conversationProfile\\user-profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HCI\\github\\src\\components\\conversation\\conversationProfile\\user-profile.vue","mtime":1589122703605},{"path":"D:\\HCI\\github\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589122691350},{"path":"D:\\HCI\\github\\node_modules\\babel-loader\\lib\\index.js","mtime":1589122690916},{"path":"D:\\HCI\\github\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589122691350},{"path":"D:\\HCI\\github\\node_modules\\vue-loader\\lib\\index.js","mtime":1589122702780}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.find-index\";\nimport _defineProperty from \"D:\\\\HCI\\\\github\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from 'vuex';\nexport default {\n  props: {\n    userProfile: {\n      type: Object,\n      required: true\n    }\n  },\n  computed: _objectSpread({}, mapState({\n    blacklist: function blacklist(state) {\n      return state.blacklist.blacklist;\n    },\n    myUserID: function myUserID(state) {\n      return state.user.currentUserProfile.userID;\n    }\n  }), {\n    isInBlacklist: function isInBlacklist() {\n      var _this = this;\n\n      return this.blacklist.findIndex(function (item) {\n        return item.userID === _this.userProfile.userID;\n      }) >= 0;\n    },\n    gender: function gender() {\n      switch (this.userProfile.gender) {\n        case this.TIM.TYPES.GENDER_MALE:\n          return '男';\n\n        case this.TIM.TYPES.GENDER_FEMALE:\n          return '女';\n\n        default:\n          return '未设置';\n      }\n    },\n    genderClass: function genderClass() {\n      switch (this.userProfile.gender) {\n        case this.TIM.TYPES.GENDER_MALE:\n          return 'icon-male';\n\n        case this.TIM.TYPES.GENDER_FEMALE:\n          return 'icon-female';\n\n        default:\n          return '';\n      }\n    }\n  }),\n  methods: {\n    addToBlackList: function addToBlackList() {\n      var _this2 = this;\n\n      this.tim.addToBlacklist({\n        userIDList: [this.userProfile.userID]\n      }).then(function () {\n        _this2.$store.dispatch('getBlacklist');\n      }).catch(function (imError) {\n        _this2.$store.commit('showMessage', {\n          message: imError.message,\n          type: 'error'\n        });\n      });\n    },\n    removeFromBlacklist: function removeFromBlacklist() {\n      var _this3 = this;\n\n      this.tim.removeFromBlacklist({\n        userIDList: [this.userProfile.userID]\n      }).then(function () {\n        _this3.$store.commit('removeFromBlacklist', _this3.userProfile.userID);\n      }).catch(function (error) {\n        _this3.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n    }\n  }\n};",{"version":3,"sources":["user-profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,SAAA,QAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,WAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AADA,GADA;AAOA,EAAA,QAAA,oBACA,QAAA,CAAA;AACA,IAAA,SAAA,EAAA,mBAAA,KAAA;AAAA,aAAA,KAAA,CAAA,SAAA,CAAA,SAAA;AAAA,KADA;AAEA,IAAA,QAAA,EAAA,kBAAA,KAAA;AAAA,aAAA,KAAA,CAAA,IAAA,CAAA,kBAAA,CAAA,MAAA;AAAA;AAFA,GAAA,CADA;AAKA,IAAA,aALA,2BAKA;AAAA;;AACA,aAAA,KAAA,SAAA,CAAA,SAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,MAAA,KAAA,KAAA,CAAA,WAAA,CAAA,MAAA;AAAA,OAAA,KAAA,CAAA;AACA,KAPA;AAQA,IAAA,MARA,oBAQA;AACA,cAAA,KAAA,WAAA,CAAA,MAAA;AACA,aAAA,KAAA,GAAA,CAAA,KAAA,CAAA,WAAA;AACA,iBAAA,GAAA;;AACA,aAAA,KAAA,GAAA,CAAA,KAAA,CAAA,aAAA;AACA,iBAAA,GAAA;;AACA;AACA,iBAAA,KAAA;AANA;AAQA,KAjBA;AAkBA,IAAA,WAlBA,yBAkBA;AACA,cAAA,KAAA,WAAA,CAAA,MAAA;AACA,aAAA,KAAA,GAAA,CAAA,KAAA,CAAA,WAAA;AACA,iBAAA,WAAA;;AACA,aAAA,KAAA,GAAA,CAAA,KAAA,CAAA,aAAA;AACA,iBAAA,aAAA;;AACA;AACA,iBAAA,EAAA;AANA;AAQA;AA3BA,IAPA;AAoCA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AAAA;;AACA,WAAA,GAAA,CACA,cADA,CACA;AAAA,QAAA,UAAA,EAAA,CAAA,KAAA,WAAA,CAAA,MAAA;AAAA,OADA,EAEA,IAFA,CAEA,YAAA;AACA,QAAA,MAAA,CAAA,MAAA,CAAA,QAAA,CAAA,cAAA;AACA,OAJA,EAKA,KALA,CAKA,UAAA,OAAA,EAAA;AACA,QAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EAAA;AACA,UAAA,OAAA,EAAA,OAAA,CAAA,OADA;AAEA,UAAA,IAAA,EAAA;AAFA,SAAA;AAIA,OAVA;AAWA,KAbA;AAcA,IAAA,mBAdA,iCAcA;AAAA;;AACA,WAAA,GAAA,CAAA,mBAAA,CAAA;AAAA,QAAA,UAAA,EAAA,CAAA,KAAA,WAAA,CAAA,MAAA;AAAA,OAAA,EAAA,IAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,qBAAA,EAAA,MAAA,CAAA,WAAA,CAAA,MAAA;AACA,OAFA,EAGA,KAHA,CAGA,UAAA,KAAA,EAAA;AACA,QAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EAAA;AACA,UAAA,IAAA,EAAA,OADA;AAEA,UAAA,OAAA,EAAA,KAAA,CAAA;AAFA,SAAA;AAIA,OARA;AASA;AAxBA;AApCA,CAAA","sourcesContent":["<template>\r\n  <div class=\"profile-user\">\r\n    <avatar :title=userProfile.userID :src=\"userProfile.avatar\" />\r\n    <div class=\"nick-name text-ellipsis\">\r\n      <span v-if=\"userProfile.nick\" :title=userProfile.nick>\r\n        {{ userProfile.nick }}\r\n      </span>\r\n      <span v-else class=\"anonymous\" title=\"该用户未设置昵称\">\r\n        [Anonymous]\r\n      </span>\r\n    </div>\r\n    <div class=\"gender\" v-if=\"genderClass\">\r\n      <span :title=\"gender\" class=\"iconfont\" :class=\"genderClass\"></span>\r\n    </div>\r\n    <el-button\r\n      title=\"将该用户加入黑名单\"\r\n      type=\"text\"\r\n      @click=\"addToBlackList\"\r\n      v-if=\"!isInBlacklist && userProfile.userID !== myUserID\"\r\n      class=\"btn-add-blacklist\"\r\n      >加入黑名单</el-button\r\n    >\r\n    <el-button title=\"将该用户移出黑名单\" type=\"text\" @click=\"removeFromBlacklist\" v-else-if=\"isInBlacklist\">移出黑名单</el-button>\r\n    <!-- 拉黑 和 反拉黑 -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n  props: {\r\n    userProfile: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      blacklist: state => state.blacklist.blacklist,\r\n      myUserID: state => state.user.currentUserProfile.userID\r\n    }),\r\n    isInBlacklist() {\r\n      return this.blacklist.findIndex(item => item.userID === this.userProfile.userID) >= 0\r\n    },\r\n    gender() {\r\n      switch (this.userProfile.gender) {\r\n        case this.TIM.TYPES.GENDER_MALE:\r\n          return '男'\r\n        case this.TIM.TYPES.GENDER_FEMALE:\r\n          return '女'\r\n        default:\r\n          return '未设置'\r\n      }\r\n    },\r\n    genderClass() {\r\n      switch (this.userProfile.gender) {\r\n        case this.TIM.TYPES.GENDER_MALE:\r\n          return 'icon-male'\r\n        case this.TIM.TYPES.GENDER_FEMALE:\r\n          return 'icon-female'\r\n        default:\r\n          return ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    addToBlackList() {\r\n      this.tim\r\n        .addToBlacklist({ userIDList: [this.userProfile.userID] })\r\n        .then(() => {\r\n          this.$store.dispatch('getBlacklist')\r\n        })\r\n        .catch(imError => {\r\n          this.$store.commit('showMessage', {\r\n            message: imError.message,\r\n            type: 'error'\r\n          })\r\n        })\r\n    },\r\n    removeFromBlacklist() {\r\n      this.tim.removeFromBlacklist({ userIDList: [this.userProfile.userID] }).then(() => {\r\n        this.$store.commit('removeFromBlacklist', this.userProfile.userID)\r\n      })\r\n      .catch(error => {\r\n          this.$store.commit('showMessage', {\r\n            type: 'error',\r\n            message: error.message\r\n          })\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.profile-user\r\n  width 100%\r\n  text-align center\r\n  padding 0 20px\r\n  .avatar\r\n    width 160px\r\n    height 160px\r\n    border-radius 50%\r\n    margin 30px auto\r\n  .nick-name\r\n    width 100%\r\n    color $base\r\n    font-size 20px\r\n    font-weight bold\r\n    text-shadow $font-dark 0 0 0.1em\r\n    .anonymous\r\n      color $first\r\n      text-shadow none\r\n  .gender\r\n    padding 5px 0 10px 0\r\n    border-bottom 1px solid $border-base\r\n  .btn-add-blacklist\r\n    color $danger\r\n</style>\r\n"],"sourceRoot":"src/components/conversation/conversationProfile"}]}