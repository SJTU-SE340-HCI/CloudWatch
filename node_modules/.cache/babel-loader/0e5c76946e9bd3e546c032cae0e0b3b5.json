{"remainingRequest":"/Users/liuzhengwei/Downloads/TIMSDK/H5/node_modules/babel-loader/lib/index.js!/Users/liuzhengwei/Downloads/TIMSDK/H5/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liuzhengwei/Downloads/TIMSDK/H5/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuzhengwei/Downloads/TIMSDK/H5/src/components/message/call-layer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuzhengwei/Downloads/TIMSDK/H5/src/components/message/call-layer.vue","mtime":1585900414000},{"path":"/Users/liuzhengwei/Downloads/TIMSDK/H5/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuzhengwei/Downloads/TIMSDK/H5/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liuzhengwei/Downloads/TIMSDK/H5/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuzhengwei/Downloads/TIMSDK/H5/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/liuzhengwei/Downloads/TIMSDK/H5/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/liuzhengwei/Downloads/TIMSDK/H5/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport RtcClient from \"../../utils/rtc-client\";\nimport { ACTION, VERSION } from \"../../utils/trtcCustomMessageMap\";\nimport { mapGetters, mapState } from 'vuex';\nimport { formatDuration } from \"../../utils/formatDuration\";\nexport default {\n  name: 'CallLayer',\n  data: function data() {\n    return {\n      Trtc: undefined,\n      isCamOn: true,\n      isMicOn: true,\n      maskShow: false,\n      isLocalMain: true,\n      // 本地视频是否是主屏幕显示\n      start: 0,\n      end: 0,\n      duration: 0,\n      hangUpTimer: 0,\n      // 通话计时id\n      ready: false,\n      dialling: false,\n      // 是否拨打电话中\n      calling: false,\n      // 是否通话中\n      isDialled: false // 是否被呼叫\n\n    };\n  },\n  computed: _objectSpread({}, mapGetters(['toAccount', 'currentConversationType']), {}, mapState({\n    userID: function userID(state) {\n      return state.user.userID;\n    },\n    userSig: function userSig(state) {\n      return state.user.userSig;\n    },\n    videoRoom: function videoRoom(state) {\n      return state.video.videoRoom;\n    },\n    sdkAppID: function sdkAppID(state) {\n      return state.user.sdkAppID;\n    }\n  }), {\n    formatDurationStr: function formatDurationStr() {\n      return formatDuration(this.duration);\n    }\n  }),\n  created: function created() {\n    var _this = this;\n\n    window.addEventListener('beforeunload', function () {\n      _this.videoCallLogOut();\n    });\n    window.addEventListener('leave', function () {\n      _this.videoCallLogOut();\n    });\n  },\n  mounted: function mounted() {\n    this.$bus.$on('isCalled', this.isCalled);\n    this.$bus.$on('missCall', this.missCall);\n    this.$bus.$on('isRefused', this.isRefused);\n    this.$bus.$on('isAccept', this.isAccept);\n    this.$bus.$on('isHungUp', this.isHungUp);\n    this.$bus.$on('busy', this.busy);\n    this.$bus.$on('video-call', this.videoCall);\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.$bus.$off('isCalled', this.isCalled);\n    this.$bus.$off('missCall', this.missCall);\n    this.$bus.$off('isRefused', this.isRefused);\n    this.$bus.$off('isAccept', this.isAccept);\n    this.$bus.$off('isHungUp', this.isHungUp);\n    this.$bus.$off('busy', this.busy);\n    this.$bus.$off('video-call', this.videoCall);\n  },\n  methods: {\n    videoCallLogOut: function videoCallLogOut() {\n      // 针对，刷新页面，关闭Tab，登出情况下，通话断开的逻辑\n      if (this.dialling || this.calling) {\n        this.leave();\n      }\n\n      if (this.isDialled) {\n        this.refuse();\n      }\n    },\n    changeState: function changeState(state, boolean) {\n      var _this2 = this;\n\n      var stateList = ['dialling', 'isDialled', 'calling'];\n      stateList.forEach(function (item) {\n        _this2[item] = item === state ? boolean : false;\n      });\n      this.$store.commit('UPDATE_ISBUSY', stateList.some(function (item) {\n        return _this2[item];\n      })); // 若stateList 中存在 true , isBusy 为 true\n    },\n    initTrtc: function () {\n      var _initTrtc = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(options) {\n        var _this3 = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // 初始化 trtc 进入房间\n                this.Trtc = new RtcClient(options);\n                _context.next = 3;\n                return this.Trtc.createLocalStream({\n                  audio: true,\n                  video: true\n                }).then(function () {\n                  // 在进房之前，判断设备\n                  _this3.Trtc.join();\n\n                  _this3.ready = true;\n                  _this3.isCamOn = true;\n                  _this3.maskShow = false;\n                }).catch(function () {\n                  alert('请确认已连接摄像头和麦克风并授予其访问权限！');\n                  _this3.ready = false;\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function initTrtc(_x) {\n        return _initTrtc.apply(this, arguments);\n      }\n\n      return initTrtc;\n    }(),\n    videoCall: function videoCall() {\n      var _this4 = this;\n\n      // 发起通话\n      if (this.calling) {\n        // 避免通话按钮多次快速的点击\n        return;\n      }\n\n      this.isLocalMain = true;\n      this.$store.commit('GENERATE_VIDEO_ROOM'); // 初始化房间号\n\n      var options = {\n        userId: this.userID,\n        userSig: this.userSig,\n        roomId: this.videoRoom,\n        sdkAppId: this.sdkAppID\n      };\n      this.initTrtc(options).then(function () {\n        if (!_this4.ready) return;\n\n        _this4.changeState('dialling', true);\n\n        _this4.timer = setTimeout(_this4.timeout, process.env.NODE_ENV === 'development' ? 999999 : 60000); // 开始计时器，开发环境超时时间较长，便于调试\n\n        _this4.sendVideoMessage(ACTION.VIDEO_CALL_ACTION_DIALING);\n      });\n    },\n    leave: function leave() {\n      // 离开房间，发起方挂断\n      if (!this.calling) {\n        // 还没有通话，单方面挂断\n        this.Trtc.leave();\n        clearTimeout(this.timer);\n        this.changeState('dialling', false);\n        this.sendVideoMessage(ACTION.VIDEO_CALL_ACTION_SPONSOR_CANCEL);\n        return;\n      }\n\n      this.hangUp(); // 通话一段时间之后，某一方面结束通话\n    },\n    timeout: function timeout() {\n      // 通话超时\n      this.changeState('dialling', false);\n      this.Trtc.leave();\n      this.sendVideoMessage(ACTION.VIDEO_CALL_ACTION_SPONSOR_TIMEOUT);\n    },\n    isCalled: function isCalled() {\n      // 被呼叫\n      this.changeState('isDialled', true);\n    },\n    missCall: function missCall() {\n      // 错过电话，也就是发起方的电话超时挂断或自己挂断\n      this.changeState('isDialled', false);\n    },\n    refuse: function refuse() {\n      // 拒绝电话\n      this.changeState('isDialled', false);\n      this.sendVideoMessage(ACTION.VIDEO_CALL_ACTION_REJECT);\n    },\n    isRefused: function isRefused() {\n      // 对方拒绝通话\n      this.changeState('dialling', false);\n      clearTimeout(this.timer);\n    },\n    resetDuration: function resetDuration(duration) {\n      var _this5 = this;\n\n      this.duration = duration;\n      this.hangUpTimer = setTimeout(function () {\n        var now = new Date();\n\n        _this5.resetDuration(parseInt((now - _this5.start) / 1000));\n      }, 1000);\n    },\n    accept: function accept() {\n      var _this6 = this;\n\n      // 接听电话\n      this.changeState('calling', true);\n      var options = {\n        userId: this.userID,\n        userSig: this.userSig,\n        roomId: this.videoRoom,\n        sdkAppId: this.sdkAppID\n      };\n      this.initTrtc(options).then(function () {\n        if (!_this6.ready) {\n          _this6.changeState('calling', false);\n\n          _this6.sendVideoMessage(ACTION.VIDEO_CALL_ACTION_ERROR);\n\n          return;\n        }\n\n        _this6.sendVideoMessage(ACTION.VIDEO_CALL_ACTION_ACCEPTED);\n\n        _this6.start = new Date();\n        clearTimeout(_this6.hangUpTimer);\n\n        _this6.resetDuration(0);\n      });\n    },\n    isAccept: function isAccept() {\n      // 对方接听自己发起的电话\n      clearTimeout(this.timer);\n      this.changeState('calling', true);\n      clearTimeout(this.hangUpTimer);\n      this.resetDuration(0);\n      this.start = new Date();\n    },\n    hangUp: function hangUp() {\n      // 通话一段时间之后，某一方挂断电话\n      this.changeState('calling', false);\n      this.Trtc.leave();\n      this.end = new Date();\n      var duration = parseInt((this.end - this.start) / 1000);\n      this.sendVideoMessage(ACTION.VIDEO_CALL_ACTION_HANGUP, duration);\n      clearTimeout(this.hangUpTimer);\n    },\n    isHungUp: function isHungUp() {\n      // 通话一段时间之后，对方挂断电话\n      if (this.calling) {\n        this.changeState('calling', false);\n        this.Trtc.leave();\n        clearTimeout(this.hangUpTimer);\n      }\n    },\n    busy: function busy(videoPayload, messageItem) {\n      videoPayload.action = ACTION.VIDEO_CALL_ACTION_LINE_BUSY;\n      var message = this.tim.createCustomMessage({\n        to: messageItem.from,\n        conversationType: this.currentConversationType,\n        payload: {\n          data: JSON.stringify(videoPayload),\n          description: '',\n          extension: ''\n        }\n      });\n      this.$store.commit('pushCurrentMessageList', message);\n      this.tim.sendMessage(message);\n    },\n    videoHandler: function videoHandler() {\n      // 是否打开摄像头\n      if (this.isCamOn) {\n        this.isCamOn = false;\n        this.maskShow = true;\n        this.Trtc.muteLocalVideo();\n      } else {\n        this.isCamOn = true;\n        this.maskShow = false;\n        this.Trtc.unmuteLocalVideo();\n      }\n    },\n    micHandler: function micHandler() {\n      // 是否打开麦克风\n      if (this.isMicOn) {\n        this.isMicOn = false;\n        this.Trtc.muteLocalAudio();\n      } else {\n        this.isMicOn = true;\n        this.Trtc.unmuteLocalAudio();\n      }\n    },\n    sendVideoMessage: function sendVideoMessage(action) {\n      var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var options = {\n        room_id: this.videoRoom,\n        call_id: '',\n        action: action,\n        version: VERSION,\n        invited_list: [],\n        duration: duration\n      };\n      var message = this.tim.createCustomMessage({\n        to: this.toAccount,\n        conversationType: this.currentConversationType,\n        payload: {\n          data: JSON.stringify(options),\n          description: '',\n          extension: ''\n        }\n      });\n      this.$store.commit('pushCurrentMessageList', message);\n      this.tim.sendMessage(message);\n    },\n    changeMainVideo: function changeMainVideo() {\n      if (!this.calling) {\n        return;\n      }\n\n      this.isLocalMain = !this.isLocalMain;\n    }\n  }\n};",{"version":3,"sources":["call-layer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,OAAA,SAAA;AACA,SAAA,MAAA,EAAA,OAAA;AACA,SAAA,UAAA,EAAA,QAAA,QAAA,MAAA;AACA,SAAA,cAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,SADA;AAEA,MAAA,OAAA,EAAA,IAFA;AAGA,MAAA,OAAA,EAAA,IAHA;AAIA,MAAA,QAAA,EAAA,KAJA;AAKA,MAAA,WAAA,EAAA,IALA;AAKA;AACA,MAAA,KAAA,EAAA,CANA;AAOA,MAAA,GAAA,EAAA,CAPA;AAQA,MAAA,QAAA,EAAA,CARA;AASA,MAAA,WAAA,EAAA,CATA;AASA;AACA,MAAA,KAAA,EAAA,KAVA;AAWA,MAAA,QAAA,EAAA,KAXA;AAWA;AACA,MAAA,OAAA,EAAA,KAZA;AAYA;AACA,MAAA,SAAA,EAAA,KAbA,CAaA;;AAbA,KAAA;AAeA,GAlBA;AAmBA,EAAA,QAAA,oBACA,UAAA,CAAA,CAAA,WAAA,EAAA,yBAAA,CAAA,CADA,MAEA,QAAA,CAAA;AACA,IAAA,MAAA,EAAA,gBAAA,KAAA;AAAA,aAAA,KAAA,CAAA,IAAA,CAAA,MAAA;AAAA,KADA;AAEA,IAAA,OAAA,EAAA,iBAAA,KAAA;AAAA,aAAA,KAAA,CAAA,IAAA,CAAA,OAAA;AAAA,KAFA;AAGA,IAAA,SAAA,EAAA,mBAAA,KAAA;AAAA,aAAA,KAAA,CAAA,KAAA,CAAA,SAAA;AAAA,KAHA;AAIA,IAAA,QAAA,EAAA,kBAAA,KAAA;AAAA,aAAA,KAAA,CAAA,IAAA,CAAA,QAAA;AAAA;AAJA,GAAA,CAFA;AAQA,IAAA,iBARA,+BAQA;AACA,aAAA,cAAA,CAAA,KAAA,QAAA,CAAA;AACA;AAVA,IAnBA;AA+BA,EAAA,OA/BA,qBA+BA;AAAA;;AACA,IAAA,MAAA,CAAA,gBAAA,CAAA,cAAA,EAAA,YAAA;AACA,MAAA,KAAA,CAAA,eAAA;AACA,KAFA;AAGA,IAAA,MAAA,CAAA,gBAAA,CAAA,OAAA,EAAA,YAAA;AACA,MAAA,KAAA,CAAA,eAAA;AACA,KAFA;AAGA,GAtCA;AAuCA,EAAA,OAvCA,qBAuCA;AACA,SAAA,IAAA,CAAA,GAAA,CAAA,UAAA,EAAA,KAAA,QAAA;AACA,SAAA,IAAA,CAAA,GAAA,CAAA,UAAA,EAAA,KAAA,QAAA;AACA,SAAA,IAAA,CAAA,GAAA,CAAA,WAAA,EAAA,KAAA,SAAA;AACA,SAAA,IAAA,CAAA,GAAA,CAAA,UAAA,EAAA,KAAA,QAAA;AACA,SAAA,IAAA,CAAA,GAAA,CAAA,UAAA,EAAA,KAAA,QAAA;AACA,SAAA,IAAA,CAAA,GAAA,CAAA,MAAA,EAAA,KAAA,IAAA;AACA,SAAA,IAAA,CAAA,GAAA,CAAA,YAAA,EAAA,KAAA,SAAA;AACA,GA/CA;AAgDA,EAAA,aAhDA,2BAgDA;AACA,SAAA,IAAA,CAAA,IAAA,CAAA,UAAA,EAAA,KAAA,QAAA;AACA,SAAA,IAAA,CAAA,IAAA,CAAA,UAAA,EAAA,KAAA,QAAA;AACA,SAAA,IAAA,CAAA,IAAA,CAAA,WAAA,EAAA,KAAA,SAAA;AACA,SAAA,IAAA,CAAA,IAAA,CAAA,UAAA,EAAA,KAAA,QAAA;AACA,SAAA,IAAA,CAAA,IAAA,CAAA,UAAA,EAAA,KAAA,QAAA;AACA,SAAA,IAAA,CAAA,IAAA,CAAA,MAAA,EAAA,KAAA,IAAA;AACA,SAAA,IAAA,CAAA,IAAA,CAAA,YAAA,EAAA,KAAA,SAAA;AACA,GAxDA;AAyDA,EAAA,OAAA,EAAA;AACA,IAAA,eADA,6BACA;AAAA;AACA,UAAA,KAAA,QAAA,IAAA,KAAA,OAAA,EAAA;AACA,aAAA,KAAA;AACA;;AACA,UAAA,KAAA,SAAA,EAAA;AACA,aAAA,MAAA;AACA;AACA,KARA;AASA,IAAA,WATA,uBASA,KATA,EASA,OATA,EASA;AAAA;;AACA,UAAA,SAAA,GAAA,CAAA,UAAA,EAAA,WAAA,EAAA,SAAA,CAAA;AACA,MAAA,SAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,IAAA,CAAA,GAAA,IAAA,KAAA,KAAA,GAAA,OAAA,GAAA,KAAA;AACA,OAFA;AAGA,WAAA,MAAA,CAAA,MAAA,CAAA,eAAA,EAAA,SAAA,CAAA,IAAA,CAAA,UAAA,IAAA;AAAA,eAAA,MAAA,CAAA,IAAA,CAAA;AAAA,OAAA,CAAA,EALA,CAKA;AACA,KAfA;AAgBA,IAAA,QAhBA;AAAA,+FAgBA,OAhBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAgBA;AACA,qBAAA,IAAA,GAAA,IAAA,SAAA,CAAA,OAAA,CAAA;AAjBA;AAAA,uBAkBA,KAAA,IAAA,CAAA,iBAAA,CAAA;AAAA,kBAAA,KAAA,EAAA,IAAA;AAAA,kBAAA,KAAA,EAAA;AAAA,iBAAA,EAAA,IAAA,CAAA,YAAA;AAAA;AACA,kBAAA,MAAA,CAAA,IAAA,CAAA,IAAA;;AACA,kBAAA,MAAA,CAAA,KAAA,GAAA,IAAA;AACA,kBAAA,MAAA,CAAA,OAAA,GAAA,IAAA;AACA,kBAAA,MAAA,CAAA,QAAA,GAAA,KAAA;AACA,iBALA,EAKA,KALA,CAKA,YAAA;AACA,kBAAA,KAAA,CACA,wBADA,CAAA;AAGA,kBAAA,MAAA,CAAA,KAAA,GAAA,KAAA;AACA,iBAVA,CAlBA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA8BA,IAAA,SA9BA,uBA8BA;AAAA;;AAAA;AACA,UAAA,KAAA,OAAA,EAAA;AAAA;AACA;AACA;;AACA,WAAA,WAAA,GAAA,IAAA;AACA,WAAA,MAAA,CAAA,MAAA,CAAA,qBAAA,EALA,CAKA;;AACA,UAAA,OAAA,GAAA;AACA,QAAA,MAAA,EAAA,KAAA,MADA;AAEA,QAAA,OAAA,EAAA,KAAA,OAFA;AAGA,QAAA,MAAA,EAAA,KAAA,SAHA;AAIA,QAAA,QAAA,EAAA,KAAA;AAJA,OAAA;AAMA,WAAA,QAAA,CAAA,OAAA,EAAA,IAAA,CAAA,YAAA;AACA,YAAA,CAAA,MAAA,CAAA,KAAA,EAAA;;AACA,QAAA,MAAA,CAAA,WAAA,CAAA,UAAA,EAAA,IAAA;;AACA,QAAA,MAAA,CAAA,KAAA,GAAA,UAAA,CAAA,MAAA,CAAA,OAAA,EAAA,OAAA,CAAA,GAAA,CAAA,QAAA,KAAA,aAAA,GAAA,MAAA,GAAA,KAAA,CAAA,CAHA,CAGA;;AACA,QAAA,MAAA,CAAA,gBAAA,CAAA,MAAA,CAAA,yBAAA;AACA,OALA;AAMA,KAhDA;AAiDA,IAAA,KAjDA,mBAiDA;AAAA;AACA,UAAA,CAAA,KAAA,OAAA,EAAA;AAAA;AACA,aAAA,IAAA,CAAA,KAAA;AACA,QAAA,YAAA,CAAA,KAAA,KAAA,CAAA;AACA,aAAA,WAAA,CAAA,UAAA,EAAA,KAAA;AACA,aAAA,gBAAA,CAAA,MAAA,CAAA,gCAAA;AACA;AACA;;AACA,WAAA,MAAA,GARA,CAQA;AACA,KA1DA;AA2DA,IAAA,OA3DA,qBA2DA;AAAA;AACA,WAAA,WAAA,CAAA,UAAA,EAAA,KAAA;AACA,WAAA,IAAA,CAAA,KAAA;AACA,WAAA,gBAAA,CAAA,MAAA,CAAA,iCAAA;AACA,KA/DA;AAgEA,IAAA,QAhEA,sBAgEA;AAAA;AACA,WAAA,WAAA,CAAA,WAAA,EAAA,IAAA;AACA,KAlEA;AAmEA,IAAA,QAnEA,sBAmEA;AAAA;AACA,WAAA,WAAA,CAAA,WAAA,EAAA,KAAA;AACA,KArEA;AAsEA,IAAA,MAtEA,oBAsEA;AAAA;AACA,WAAA,WAAA,CAAA,WAAA,EAAA,KAAA;AACA,WAAA,gBAAA,CAAA,MAAA,CAAA,wBAAA;AACA,KAzEA;AA0EA,IAAA,SA1EA,uBA0EA;AAAA;AACA,WAAA,WAAA,CAAA,UAAA,EAAA,KAAA;AACA,MAAA,YAAA,CAAA,KAAA,KAAA,CAAA;AACA,KA7EA;AA8EA,IAAA,aA9EA,yBA8EA,QA9EA,EA8EA;AAAA;;AACA,WAAA,QAAA,GAAA,QAAA;AACA,WAAA,WAAA,GAAA,UAAA,CAAA,YAAA;AACA,YAAA,GAAA,GAAA,IAAA,IAAA,EAAA;;AACA,QAAA,MAAA,CAAA,aAAA,CAAA,QAAA,CAAA,CAAA,GAAA,GAAA,MAAA,CAAA,KAAA,IAAA,IAAA,CAAA;AACA,OAHA,EAGA,IAHA,CAAA;AAIA,KApFA;AAqFA,IAAA,MArFA,oBAqFA;AAAA;;AAAA;AACA,WAAA,WAAA,CAAA,SAAA,EAAA,IAAA;AACA,UAAA,OAAA,GAAA;AACA,QAAA,MAAA,EAAA,KAAA,MADA;AAEA,QAAA,OAAA,EAAA,KAAA,OAFA;AAGA,QAAA,MAAA,EAAA,KAAA,SAHA;AAIA,QAAA,QAAA,EAAA,KAAA;AAJA,OAAA;AAMA,WAAA,QAAA,CAAA,OAAA,EAAA,IAAA,CAAA,YAAA;AACA,YAAA,CAAA,MAAA,CAAA,KAAA,EAAA;AACA,UAAA,MAAA,CAAA,WAAA,CAAA,SAAA,EAAA,KAAA;;AACA,UAAA,MAAA,CAAA,gBAAA,CAAA,MAAA,CAAA,uBAAA;;AACA;AACA;;AACA,QAAA,MAAA,CAAA,gBAAA,CAAA,MAAA,CAAA,0BAAA;;AACA,QAAA,MAAA,CAAA,KAAA,GAAA,IAAA,IAAA,EAAA;AACA,QAAA,YAAA,CAAA,MAAA,CAAA,WAAA,CAAA;;AACA,QAAA,MAAA,CAAA,aAAA,CAAA,CAAA;AACA,OAVA;AAWA,KAxGA;AAyGA,IAAA,QAzGA,sBAyGA;AAAA;AACA,MAAA,YAAA,CAAA,KAAA,KAAA,CAAA;AACA,WAAA,WAAA,CAAA,SAAA,EAAA,IAAA;AACA,MAAA,YAAA,CAAA,KAAA,WAAA,CAAA;AACA,WAAA,aAAA,CAAA,CAAA;AACA,WAAA,KAAA,GAAA,IAAA,IAAA,EAAA;AACA,KA/GA;AAgHA,IAAA,MAhHA,oBAgHA;AAAA;AACA,WAAA,WAAA,CAAA,SAAA,EAAA,KAAA;AACA,WAAA,IAAA,CAAA,KAAA;AACA,WAAA,GAAA,GAAA,IAAA,IAAA,EAAA;AACA,UAAA,QAAA,GAAA,QAAA,CAAA,CAAA,KAAA,GAAA,GAAA,KAAA,KAAA,IAAA,IAAA,CAAA;AACA,WAAA,gBAAA,CAAA,MAAA,CAAA,wBAAA,EAAA,QAAA;AACA,MAAA,YAAA,CAAA,KAAA,WAAA,CAAA;AACA,KAvHA;AAwHA,IAAA,QAxHA,sBAwHA;AAAA;AACA,UAAA,KAAA,OAAA,EAAA;AACA,aAAA,WAAA,CAAA,SAAA,EAAA,KAAA;AACA,aAAA,IAAA,CAAA,KAAA;AACA,QAAA,YAAA,CAAA,KAAA,WAAA,CAAA;AACA;AACA,KA9HA;AA+HA,IAAA,IA/HA,gBA+HA,YA/HA,EA+HA,WA/HA,EA+HA;AACA,MAAA,YAAA,CAAA,MAAA,GAAA,MAAA,CAAA,2BAAA;AACA,UAAA,OAAA,GAAA,KAAA,GAAA,CAAA,mBAAA,CAAA;AACA,QAAA,EAAA,EAAA,WAAA,CAAA,IADA;AAEA,QAAA,gBAAA,EAAA,KAAA,uBAFA;AAGA,QAAA,OAAA,EAAA;AACA,UAAA,IAAA,EAAA,IAAA,CAAA,SAAA,CAAA,YAAA,CADA;AAEA,UAAA,WAAA,EAAA,EAFA;AAGA,UAAA,SAAA,EAAA;AAHA;AAHA,OAAA,CAAA;AASA,WAAA,MAAA,CAAA,MAAA,CAAA,wBAAA,EAAA,OAAA;AACA,WAAA,GAAA,CAAA,WAAA,CAAA,OAAA;AACA,KA5IA;AA6IA,IAAA,YA7IA,0BA6IA;AAAA;AACA,UAAA,KAAA,OAAA,EAAA;AACA,aAAA,OAAA,GAAA,KAAA;AACA,aAAA,QAAA,GAAA,IAAA;AACA,aAAA,IAAA,CAAA,cAAA;AACA,OAJA,MAIA;AACA,aAAA,OAAA,GAAA,IAAA;AACA,aAAA,QAAA,GAAA,KAAA;AACA,aAAA,IAAA,CAAA,gBAAA;AACA;AACA,KAvJA;AAwJA,IAAA,UAxJA,wBAwJA;AAAA;AACA,UAAA,KAAA,OAAA,EAAA;AACA,aAAA,OAAA,GAAA,KAAA;AACA,aAAA,IAAA,CAAA,cAAA;AACA,OAHA,MAGA;AACA,aAAA,OAAA,GAAA,IAAA;AACA,aAAA,IAAA,CAAA,gBAAA;AACA;AACA,KAhKA;AAiKA,IAAA,gBAjKA,4BAiKA,MAjKA,EAiKA;AAAA,UAAA,QAAA,uEAAA,CAAA;AACA,UAAA,OAAA,GAAA;AACA,QAAA,OAAA,EAAA,KAAA,SADA;AAEA,QAAA,OAAA,EAAA,EAFA;AAGA,QAAA,MAAA,EAAA,MAHA;AAIA,QAAA,OAAA,EAAA,OAJA;AAKA,QAAA,YAAA,EAAA,EALA;AAMA,QAAA,QAAA,EAAA;AANA,OAAA;AAQA,UAAA,OAAA,GAAA,KAAA,GAAA,CAAA,mBAAA,CAAA;AACA,QAAA,EAAA,EAAA,KAAA,SADA;AAEA,QAAA,gBAAA,EAAA,KAAA,uBAFA;AAGA,QAAA,OAAA,EAAA;AACA,UAAA,IAAA,EAAA,IAAA,CAAA,SAAA,CAAA,OAAA,CADA;AAEA,UAAA,WAAA,EAAA,EAFA;AAGA,UAAA,SAAA,EAAA;AAHA;AAHA,OAAA,CAAA;AASA,WAAA,MAAA,CAAA,MAAA,CAAA,wBAAA,EAAA,OAAA;AACA,WAAA,GAAA,CAAA,WAAA,CAAA,OAAA;AACA,KArLA;AAsLA,IAAA,eAtLA,6BAsLA;AACA,UAAA,CAAA,KAAA,OAAA,EAAA;AACA;AACA;;AACA,WAAA,WAAA,GAAA,CAAA,KAAA,WAAA;AACA;AA3LA;AAzDA,CAAA","sourcesContent":["<template>\n  <div class=\"call-container\" v-if=\"dialling || calling || isDialled\">\n    <div class=\"choose\" v-if=\"isDialled\">\n      <div class=\"title\">\n        {{ toAccount }}&nbsp;来电话了\n      </div>\n      <div class=\"buttons\">\n        <div class=\"accept\" @click=\"accept\"></div>\n        <div class=\"refuse\" @click=\"refuse\"></div>\n      </div>\n    </div>\n    <div class=\"call\" v-if=\"dialling || calling\">\n      <div class=\"title\" v-if=\"dialling\">\n        正在呼叫&nbsp;{{ toAccount }}...\n      </div>\n      <div id=\"local\" @click=\"changeMainVideo\" :class=\"isLocalMain ? 'small' : 'big'\" v-show=\"calling\"></div>\n      <div name=\"remote\" :class=\"isLocalMain ? 'big' : 'small'\" @click=\"changeMainVideo\" v-show=\"calling\"></div>\n      <div class=\"duration\" v-show=\"calling\">\n        {{ formatDurationStr }}\n      </div>\n      <div class=\"buttons\">\n        <div :class=\"isCamOn ? 'videoOn' : 'videoOff'\" @click=\"videoHandler\"></div>\n        <div class=\"refuse\" @click=\"leave\"></div>\n        <div :class=\"isMicOn ? 'micOn' : 'micOff'\" @click=\"micHandler\"></div>\n      </div>\n      <div class=\"mask\" v-show=\"maskShow\" :class=\"isLocalMain ? 'small' : 'big'\" @click=\"changeMainVideo\">\n        <div>\n          <img class=\"image\" src=\"../../assets/image/camera-max.png\"/>\n          <p class=\"notice\">摄像头未打开</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport RtcClient from '../../utils/rtc-client'\nimport { ACTION, VERSION } from '../../utils/trtcCustomMessageMap'\nimport { mapGetters, mapState } from 'vuex'\nimport { formatDuration } from '../../utils/formatDuration'\n\nexport default {\n  name: 'CallLayer',\n  data() {\n    return {\n      Trtc: undefined,\n      isCamOn: true,\n      isMicOn: true,\n      maskShow: false,\n      isLocalMain: true, // 本地视频是否是主屏幕显示\n      start: 0,\n      end: 0,\n      duration: 0,\n      hangUpTimer: 0, // 通话计时id\n      ready: false,\n      dialling: false, // 是否拨打电话中\n      calling: false, // 是否通话中\n      isDialled: false, // 是否被呼叫\n    }\n  },\n  computed: {\n    ...mapGetters(['toAccount', 'currentConversationType']),\n    ...mapState({\n      userID: state => state.user.userID,\n      userSig: state => state.user.userSig,\n      videoRoom: state => state.video.videoRoom,\n      sdkAppID: state => state.user.sdkAppID\n    }),\n    formatDurationStr() {\n      return formatDuration(this.duration)\n    },\n  },\n  created() {\n    window.addEventListener('beforeunload', () => {\n      this.videoCallLogOut()\n    })\n    window.addEventListener('leave', () => {\n      this.videoCallLogOut()\n    })\n  },\n  mounted() {\n    this.$bus.$on('isCalled', this.isCalled)\n    this.$bus.$on('missCall', this.missCall)\n    this.$bus.$on('isRefused', this.isRefused)\n    this.$bus.$on('isAccept', this.isAccept)\n    this.$bus.$on('isHungUp', this.isHungUp)\n    this.$bus.$on('busy', this.busy)\n    this.$bus.$on('video-call', this.videoCall)\n  },\n  beforeDestroy() {\n    this.$bus.$off('isCalled', this.isCalled)\n    this.$bus.$off('missCall', this.missCall)\n    this.$bus.$off('isRefused', this.isRefused)\n    this.$bus.$off('isAccept', this.isAccept)\n    this.$bus.$off('isHungUp', this.isHungUp)\n    this.$bus.$off('busy', this.busy)\n    this.$bus.$off('video-call', this.videoCall)\n  },\n  methods: {\n    videoCallLogOut() { // 针对，刷新页面，关闭Tab，登出情况下，通话断开的逻辑\n      if (this.dialling || this.calling) {\n        this.leave()\n      }\n      if (this.isDialled) {\n        this.refuse()\n      }\n    },\n    changeState(state, boolean) {\n      let stateList = ['dialling', 'isDialled', 'calling']\n      stateList.forEach(item => {\n        this[item] = item === state ? boolean : false\n      })\n      this.$store.commit('UPDATE_ISBUSY', stateList.some(item => this[item])) // 若stateList 中存在 true , isBusy 为 true\n    },\n    async initTrtc(options) { // 初始化 trtc 进入房间\n      this.Trtc = new RtcClient(options)\n      await this.Trtc.createLocalStream({ audio: true, video: true }).then(() => { // 在进房之前，判断设备\n          this.Trtc.join()\n          this.ready = true\n          this.isCamOn = true\n          this.maskShow = false\n      }).catch(() => {\n        alert(\n          '请确认已连接摄像头和麦克风并授予其访问权限！'\n        )\n        this.ready = false\n      })\n    },\n    videoCall() { // 发起通话\n      if (this.calling) { // 避免通话按钮多次快速的点击\n        return\n      }\n      this.isLocalMain = true\n      this.$store.commit('GENERATE_VIDEO_ROOM') // 初始化房间号\n      const options = {\n        userId: this.userID,\n        userSig: this.userSig,\n        roomId: this.videoRoom,\n        sdkAppId: this.sdkAppID\n      }\n      this.initTrtc(options).then(() => {\n        if (!this.ready) return\n        this.changeState('dialling', true)\n        this.timer = setTimeout(this.timeout, process.env.NODE_ENV === 'development' ? 999999 : 60000) // 开始计时器，开发环境超时时间较长，便于调试\n        this.sendVideoMessage(ACTION.VIDEO_CALL_ACTION_DIALING)\n      })\n    },\n    leave() { // 离开房间，发起方挂断\n      if (!this.calling) { // 还没有通话，单方面挂断\n        this.Trtc.leave()\n        clearTimeout(this.timer)\n        this.changeState('dialling', false)\n        this.sendVideoMessage(ACTION.VIDEO_CALL_ACTION_SPONSOR_CANCEL)\n        return\n      }\n      this.hangUp() // 通话一段时间之后，某一方面结束通话\n    },\n    timeout() { // 通话超时\n      this.changeState('dialling', false)\n      this.Trtc.leave()\n      this.sendVideoMessage(ACTION.VIDEO_CALL_ACTION_SPONSOR_TIMEOUT)\n    },\n    isCalled() { // 被呼叫\n      this.changeState('isDialled', true)\n    },\n    missCall() { // 错过电话，也就是发起方的电话超时挂断或自己挂断\n      this.changeState('isDialled', false)\n    },\n    refuse() { // 拒绝电话\n      this.changeState('isDialled', false)\n      this.sendVideoMessage(ACTION.VIDEO_CALL_ACTION_REJECT)\n    },\n    isRefused() { // 对方拒绝通话\n      this.changeState('dialling', false)\n      clearTimeout(this.timer)\n    },\n    resetDuration(duration) {\n      this.duration = duration\n      this.hangUpTimer = setTimeout(() => {\n        let now = new Date()\n        this.resetDuration(parseInt((now - this.start) / 1000))\n      }, 1000)\n    },\n    accept() { // 接听电话\n      this.changeState('calling', true)\n      const options = {\n       userId: this.userID,\n        userSig: this.userSig,\n        roomId: this.videoRoom,\n        sdkAppId: this.sdkAppID\n      }\n      this.initTrtc(options).then(() => {\n        if (!this.ready) {\n          this.changeState('calling', false)\n          this.sendVideoMessage(ACTION.VIDEO_CALL_ACTION_ERROR)\n          return\n        }\n        this.sendVideoMessage(ACTION.VIDEO_CALL_ACTION_ACCEPTED)\n        this.start = new Date()\n        clearTimeout(this.hangUpTimer)\n        this.resetDuration(0)\n      })\n    },\n    isAccept() { // 对方接听自己发起的电话\n      clearTimeout(this.timer)\n      this.changeState('calling', true)\n      clearTimeout(this.hangUpTimer)\n      this.resetDuration(0)\n      this.start = new Date()\n    },\n    hangUp() { // 通话一段时间之后，某一方挂断电话\n      this.changeState('calling', false)\n      this.Trtc.leave()\n      this.end = new Date()\n      const duration = parseInt((this.end - this.start) / 1000)\n      this.sendVideoMessage(ACTION.VIDEO_CALL_ACTION_HANGUP, duration)\n      clearTimeout(this.hangUpTimer)\n    },\n    isHungUp() { // 通话一段时间之后，对方挂断电话\n      if (this.calling) {\n        this.changeState('calling', false)\n        this.Trtc.leave()\n        clearTimeout(this.hangUpTimer)\n      }\n    },\n    busy(videoPayload, messageItem) {\n      videoPayload.action = ACTION.VIDEO_CALL_ACTION_LINE_BUSY\n      const message = this.tim.createCustomMessage({\n        to: messageItem.from,\n        conversationType: this.currentConversationType,\n        payload: {\n          data: JSON.stringify(videoPayload),\n          description: '',\n          extension: ''\n        }\n      })\n      this.$store.commit('pushCurrentMessageList', message)\n      this.tim.sendMessage(message)\n    },\n    videoHandler() { // 是否打开摄像头\n      if (this.isCamOn) {\n        this.isCamOn = false\n        this.maskShow = true\n        this.Trtc.muteLocalVideo()\n      } else {\n        this.isCamOn = true\n        this.maskShow = false\n        this.Trtc.unmuteLocalVideo()\n      }\n    },\n    micHandler() { // 是否打开麦克风\n      if (this.isMicOn) {\n        this.isMicOn = false\n        this.Trtc.muteLocalAudio()\n      } else {\n        this.isMicOn = true\n        this.Trtc.unmuteLocalAudio()\n      }\n    },\n    sendVideoMessage(action, duration = 0) {\n      const options = {\n        room_id: this.videoRoom,\n        call_id: '',\n        action,\n        version: VERSION,\n        invited_list: [],\n        duration\n      }\n      const message = this.tim.createCustomMessage({\n        to: this.toAccount,\n        conversationType: this.currentConversationType,\n        payload: {\n          data: JSON.stringify(options),\n          description: '',\n          extension: ''\n        }\n      })\n      this.$store.commit('pushCurrentMessageList', message)\n      this.tim.sendMessage(message)\n    },\n    changeMainVideo() {\n      if (!this.calling) {\n        return\n      }\n      this.isLocalMain = !this.isLocalMain\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n.call-container\n  background center url(\"data:image/png;base64,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\")\n  background-size cover\n  position absolute\n  z-index 999\n.accept, .refuse, .videoOn, .videoOff, .micOn, .micOff\n  height 50px\n  width 50px\n  box-sizing border-box\n  border-radius 50%\n  cursor:pointer\n.accept\n  background center no-repeat url(\"../../assets/image/call.png\")\n  background-size 60%\n  background-color $success\n.refuse\n  background center no-repeat url(\"../../assets/image/close.png\")\n  background-size 70%\n  background-color $danger\n.videoOn\n  background center no-repeat url(\"../../assets/image/big-camera-on.png\")\n.videoOff\n  background center no-repeat url(\"../../assets/image/big-camera-off.png\")\n.micOn\n  background center no-repeat url(\"../../assets/image/big-mic-on.png\")\n.micOff\n  background center no-repeat url(\"../../assets/image/big-mic-off.png\")\n.buttons\n  position absolute\n  z-index 20\n  width 70%\n  top 75%\n  display flex\n  justify-content space-around\n  margin 0 15% 0 15%\n.duration\n  color #fff\n  position absolute\n  z-index 20\n  width 100%\n  top 70%\n  display flex\n  justify-content center\n.mask\n  position absolute\n  z-index 10\n  background #D8D8D8\n  height 100%\n  width 100%\n  display flex\n  align-items center\n  justify-content center\n  space\n  .image\n    margin-left 15%\n  .notice\n    color #888888\n.choose, .call\n  color #fff\n  background-color rgba(0, 0, 0, 0.8)\n  height 100%\n  width 100%\n.title\n  margin 25% 0 0 0\n  text-align center\n  width 100%\n  position absolute\n  z-index 10\n  color  #fff\n  font-size 40px\n  font-weight 700\n.big\n  position absolute\n  height 100%\n  width 100%\n.small\n  position absolute\n  margin-left 74.8%\n  z-index 999\n  border-style solid\n  border-width 1px\n  border-color #808080\n  height 44.8%\n  width 25.2%\n</style>"],"sourceRoot":"src/components/message"}]}