{"remainingRequest":"D:\\HCI\\CloudWatch\\node_modules\\babel-loader\\lib\\index.js!D:\\HCI\\CloudWatch\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\HCI\\CloudWatch\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HCI\\CloudWatch\\src\\components\\group\\group-list.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HCI\\CloudWatch\\src\\components\\group\\group-list.vue","mtime":1589001011132},{"path":"D:\\HCI\\CloudWatch\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589000993815},{"path":"D:\\HCI\\CloudWatch\\node_modules\\babel-loader\\lib\\index.js","mtime":1589000993275},{"path":"D:\\HCI\\CloudWatch\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589000993815},{"path":"D:\\HCI\\CloudWatch\\node_modules\\vue-loader\\lib\\index.js","mtime":1589001009411}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:\\\\HCI\\\\CloudWatch\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:\\\\HCI\\\\CloudWatch\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\nimport _Autocomplete2 from \"element-ui/lib/theme-chalk/autocomplete.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Autocomplete from \"element-ui/lib/autocomplete\";\nimport _Dialog2 from \"element-ui/lib/theme-chalk/dialog.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Dialog from \"element-ui/lib/dialog\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from 'vuex';\nimport CreateGroup from \"./create-group.vue\";\nimport GroupItem from \"./group-item.vue\";\nexport default {\n  data: function data() {\n    return {\n      groupID: '',\n      hideSearchLoading: true\n    };\n  },\n  components: {\n    GroupItem: GroupItem,\n    ElDialog: _Dialog,\n    CreateGroup: CreateGroup,\n    ElAutocomplete: _Autocomplete\n  },\n  computed: _objectSpread({\n    groupList: function groupList() {\n      return this.$store.state.group.groupList;\n    }\n  }, mapState({\n    createGroupModelVisible: function createGroupModelVisible(state) {\n      return state.group.createGroupModelVisible;\n    }\n  })),\n  methods: {\n    onGroupUpdated: function onGroupUpdated(groupList) {\n      this.$store.dispatch('updateGroupList', groupList);\n    },\n    createGroup: function createGroup() {},\n    closeCreateGroupModel: function closeCreateGroupModel() {\n      this.$store.commit('updateCreateGroupModelVisible', false);\n    },\n    searchGroupByID: function searchGroupByID(queryString, showInSearchResult) {\n      var _this = this;\n\n      if (queryString.trim().length > 0) {\n        this.hideSearchLoading = false;\n        this.tim.searchGroupByID(queryString).then(function (_ref) {\n          var group = _ref.data.group;\n          showInSearchResult([group]);\n        }).catch(function () {\n          _this.$store.commit('showMessage', {\n            message: '没有找到该群',\n            type: 'error'\n          });\n        });\n      } else {\n        this.hideSearchLoading = true;\n      }\n    },\n    showCreateGroupModel: function showCreateGroupModel() {\n      this.$store.commit('updateCreateGroupModelVisible', true);\n    },\n    applyJoinGroup: function applyJoinGroup(group) {\n      var _this2 = this;\n\n      this.tim.joinGroup({\n        groupID: group.groupID\n      }).then( /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(res) {\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.t0 = res.data.status;\n                  _context.next = _context.t0 === _this2.TIM.TYPES.JOIN_STATUS_WAIT_APPROVAL ? 3 : _context.t0 === _this2.TIM.TYPES.JOIN_STATUS_SUCCESS ? 5 : _context.t0 === _this2.TIM.TYPES.JOIN_STATUS_ALREADY_IN_GROUP ? 9 : 11;\n                  break;\n\n                case 3:\n                  _this2.$store.commit('showMessage', {\n                    message: '申请成功，等待群管理员确认。',\n                    type: 'info'\n                  });\n\n                  return _context.abrupt(\"break\", 12);\n\n                case 5:\n                  _context.next = 7;\n                  return _this2.$store.dispatch('checkoutConversation', \"GROUP\".concat(res.data.group.groupID));\n\n                case 7:\n                  _this2.$store.commit('showMessage', {\n                    message: '加群成功',\n                    type: 'success'\n                  });\n\n                  return _context.abrupt(\"break\", 12);\n\n                case 9:\n                  _this2.$store.commit('showMessage', {\n                    message: '您已经是群成员了，请勿重复加群哦！',\n                    type: 'info'\n                  });\n\n                  return _context.abrupt(\"break\", 12);\n\n                case 11:\n                  return _context.abrupt(\"break\", 12);\n\n                case 12:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }()).catch(function (error) {\n        _this2.$store.commit('showMessage', {\n          message: error.message,\n          type: 'error'\n        });\n      });\n    }\n  }\n};",{"version":3,"sources":["group-list.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"list-container\">\r\n    <div class=\"header-bar\">\r\n      <el-autocomplete\r\n        :value-key=\"'groupID'\"\r\n        :debounce=\"500\"\r\n        size=\"mini\"\r\n        v-model=\"groupID\"\r\n        placeholder=\"输入群ID搜索\"\r\n        :fetch-suggestions=\"searchGroupByID\"\r\n        class=\"group-seach-bar\"\r\n        prefix-icon=\"el-icon-search\"\r\n        :hide-loading=\"hideSearchLoading\"\r\n        @input=\"hideSearchLoading = false\"\r\n        @select=\"applyJoinGroup\"\r\n      ></el-autocomplete>\r\n      <button title=\"创建群组\" @click=\"showCreateGroupModel\">\r\n        <i class=\"tim-icon-add\"></i>\r\n      </button>\r\n    </div>\r\n    <div class=\"group-container\">\r\n      <group-item v-for=\"group in groupList\" :key=\"group.groupID\" :group=\"group\" />\r\n      <el-dialog title=\"创建群组\" :visible=\"createGroupModelVisible\" @close=\"closeCreateGroupModel\" width=\"30%\">\r\n        <create-group></create-group>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport { Dialog, Autocomplete } from 'element-ui'\r\nimport CreateGroup from './create-group.vue'\r\nimport GroupItem from './group-item.vue'\r\nexport default {\r\n  data() {\r\n    return {\r\n      groupID: '',\r\n      hideSearchLoading: true\r\n    }\r\n  },\r\n  components: {\r\n    GroupItem,\r\n    ElDialog: Dialog,\r\n    CreateGroup,\r\n    ElAutocomplete: Autocomplete\r\n  },\r\n  computed: {\r\n    groupList: function() {\r\n      return this.$store.state.group.groupList\r\n    },\r\n    ...mapState({\r\n      createGroupModelVisible: state => {\r\n        return state.group.createGroupModelVisible\r\n      }\r\n    })\r\n  },\r\n  methods: {\r\n    onGroupUpdated(groupList) {\r\n      this.$store.dispatch('updateGroupList', groupList)\r\n    },\r\n    createGroup() {},\r\n    closeCreateGroupModel() {\r\n      this.$store.commit('updateCreateGroupModelVisible', false)\r\n    },\r\n    searchGroupByID(queryString, showInSearchResult) {\r\n      if (queryString.trim().length > 0) {\r\n        this.hideSearchLoading = false\r\n        this.tim\r\n          .searchGroupByID(queryString)\r\n          .then(({ data: { group } }) => {\r\n            showInSearchResult([group])\r\n          })\r\n          .catch(() => {\r\n            this.$store.commit('showMessage', {\r\n              message: '没有找到该群',\r\n              type: 'error'\r\n            })\r\n          })\r\n      } else {\r\n        this.hideSearchLoading = true\r\n      }\r\n    },\r\n    showCreateGroupModel() {\r\n      this.$store.commit('updateCreateGroupModelVisible', true)\r\n    },\r\n    applyJoinGroup(group) {\r\n      this.tim\r\n        .joinGroup({ groupID: group.groupID })\r\n        .then(async res => {\r\n          switch(res.data.status) {\r\n            case this.TIM.TYPES.JOIN_STATUS_WAIT_APPROVAL:\r\n              this.$store.commit('showMessage', {\r\n                message: '申请成功，等待群管理员确认。',\r\n                type: 'info'\r\n              })\r\n              break\r\n            case this.TIM.TYPES.JOIN_STATUS_SUCCESS:\r\n              await this.$store.dispatch(\r\n                'checkoutConversation',\r\n                `GROUP${res.data.group.groupID}`\r\n              )\r\n              this.$store.commit('showMessage', {\r\n                message: '加群成功',\r\n                type: 'success'\r\n              })\r\n              break\r\n            case this.TIM.TYPES.JOIN_STATUS_ALREADY_IN_GROUP:\r\n              this.$store.commit('showMessage', {\r\n                message: '您已经是群成员了，请勿重复加群哦！',\r\n                type: 'info'\r\n              })\r\n              break\r\n            default: break\r\n          }\r\n        })\r\n        .catch(error => {\r\n          this.$store.commit('showMessage', {\r\n            message: error.message,\r\n            type: 'error'\r\n          })\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.list-container\r\n  height 100%\r\n  width 100%\r\n  display flex\r\n  flex-direction column\r\n  .group-container \r\n    overflow-y scroll\r\n  .header-bar\r\n    display: flex;\r\n    flex-shrink 0\r\n    height 50px\r\n    border-bottom 1px solid $background-deep-dark\r\n    padding 10px 10px 10px 20px\r\n    .group-seach-bar\r\n      width 100%\r\n      margin-right 10px\r\n      >>> .el-input\r\n        input\r\n          color $first\r\n          border none\r\n          border-radius 30px\r\n          background-color $deep-background !important\r\n          &::placeholder\r\n            color $font-dark\r\n        .el-icon-search\r\n          color $font-dark\r\n    button\r\n      float right\r\n      display: inline-block;\r\n      cursor: pointer;\r\n      background $background-deep-dark\r\n      border: none\r\n      color: $font-dark;\r\n      box-sizing: border-box;\r\n      transition: .3s;\r\n      -moz-user-select: none;\r\n      -webkit-user-select: none;\r\n      -ms-user-select: none;\r\n      margin: 0\r\n      padding 0\r\n      width 30px\r\n      height 30px\r\n      line-height 34px\r\n      font-size: 24px;\r\n      text-align: center;\r\n      white-space: nowrap;\r\n      border-radius: 50%\r\n      outline 0\r\n      flex-shrink 0\r\n      &:hover\r\n        transform: rotate(360deg);\r\n        color $light-primary\r\n  .scroll-container\r\n    overflow-y scroll\r\n    flex 1\r\n\r\n</style>\r\n"],"sourceRoot":"src/components/group"}]}