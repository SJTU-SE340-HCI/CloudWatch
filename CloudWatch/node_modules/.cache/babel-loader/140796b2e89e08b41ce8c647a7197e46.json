{"remainingRequest":"D:\\HCI\\CloudWatch\\node_modules\\babel-loader\\lib\\index.js!D:\\HCI\\CloudWatch\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\HCI\\CloudWatch\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HCI\\CloudWatch\\src\\components\\group\\create-group.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HCI\\CloudWatch\\src\\components\\group\\create-group.vue","mtime":1589001011130},{"path":"D:\\HCI\\CloudWatch\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589000993815},{"path":"D:\\HCI\\CloudWatch\\node_modules\\babel-loader\\lib\\index.js","mtime":1589000993275},{"path":"D:\\HCI\\CloudWatch\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1589000993815},{"path":"D:\\HCI\\CloudWatch\\node_modules\\vue-loader\\lib\\index.js","mtime":1589001009411}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"D:\\\\HCI\\\\CloudWatch\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _Radio2 from \"element-ui/lib/theme-chalk/radio.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Radio from \"element-ui/lib/radio\";\nimport _RadioGroup2 from \"element-ui/lib/theme-chalk/radio-group.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _RadioGroup from \"element-ui/lib/radio-group\";\nimport _Option2 from \"element-ui/lib/theme-chalk/option.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Option from \"element-ui/lib/option\";\nimport _Select2 from \"element-ui/lib/theme-chalk/select.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Select from \"element-ui/lib/select\";\nimport _Input2 from \"element-ui/lib/theme-chalk/input.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Input from \"element-ui/lib/input\";\nimport _FormItem2 from \"element-ui/lib/theme-chalk/form-item.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _FormItem from \"element-ui/lib/form-item\";\nimport _Form2 from \"element-ui/lib/theme-chalk/form.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Form from \"element-ui/lib/form\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  components: {\n    ElForm: _Form,\n    ElFormItem: _FormItem,\n    ElInput: _Input,\n    ElSelect: _Select,\n    ElOption: _Option,\n    ElRadioGroup: _RadioGroup,\n    ElRadio: _Radio\n  },\n  data: function data() {\n    return {\n      form: {\n        groupID: '',\n        name: '',\n        type: 'Private',\n        avatar: '',\n        introduction: '',\n        notification: '',\n        joinOption: 'FreeAccess',\n        memberList: []\n      },\n      options: [],\n      loading: false,\n      rules: {\n        name: [{\n          required: true,\n          message: '请输入群名称',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  computed: {\n    joinOptionDisabled: function joinOptionDisabled() {\n      return [this.TIM.TYPES.GRP_PRIVATE, this.TIM.TYPES.GRP_CHATROOM, this.TIM.TYPES.GRP_AVCHATROOM].includes(this.form.type);\n    }\n  },\n  methods: {\n    onSubmit: function onSubmit(ref) {\n      var _this = this;\n\n      this.$refs[ref].validate(function (valid) {\n        if (!valid) {\n          return false;\n        }\n\n        _this.createGroup();\n      });\n    },\n    closeCreateGroupModel: function closeCreateGroupModel() {\n      this.$store.commit('updateCreateGroupModelVisible', false);\n    },\n    createGroup: function createGroup() {\n      var _this2 = this;\n\n      this.tim.createGroup(this.getOptions()).then(function (imResponse) {\n        _this2.$store.commit('showMessage', {\n          message: \"\\u7FA4\\u7EC4\\uFF1A\\u3010\".concat(imResponse.data.group.name, \"\\u3011\\u521B\\u5EFA\\u6210\\u529F\"),\n          type: 'success'\n        });\n\n        _this2.closeCreateGroupModel();\n      }).catch(function (error) {\n        _this2.$store.commit('showMessage', {\n          type: 'error',\n          message: error.message\n        });\n      });\n    },\n    getOptions: function getOptions() {\n      var options = _objectSpread({}, this.form, {\n        memberList: this.form.memberList.map(function (userID) {\n          return {\n            userID: userID\n          };\n        })\n      });\n\n      if (['Private', 'AVChatRoom'].includes(this.form.type)) {\n        delete options.joinOption;\n      }\n\n      return options;\n    },\n    handleSearchUser: function handleSearchUser(userID) {\n      var _this3 = this;\n\n      if (userID !== '') {\n        this.loading = true;\n        this.tim.getUserProfile({\n          userIDList: [userID]\n        }).then(function (_ref) {\n          var data = _ref.data;\n          _this3.options = data.map(function (item) {\n            return item.userID;\n          });\n          _this3.loading = false;\n        }).catch(function (error) {\n          _this3.$store.commit('showMessage', {\n            type: 'error',\n            message: error.message\n          });\n        });\n      }\n    }\n  }\n};",{"version":3,"sources":["create-group.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <el-form :model=\"form\" :rules=\"rules\" ref=\"createGroupForm\" label-width=\"100px\">\r\n      <el-form-item label=\"群ID\">\r\n        <el-input v-model=\"form.groupID\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"群名称\" prop=\"name\">\r\n        <el-input v-model=\"form.name\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"群类型\">\r\n        <el-select v-model=\"form.type\">\r\n          <el-option label=\"Private\" value=\"Private\"></el-option>\r\n          <el-option label=\"Public\" value=\"Public\"></el-option>\r\n          <el-option label=\"ChatRoom\" value=\"ChatRoom\"></el-option>\r\n          <el-option label=\"AVChatRoom\" value=\"AVChatRoom\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"群头像地址\">\r\n        <el-input v-model=\"form.avatar\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"群简介\">\r\n        <el-input type=\"textarea\" v-model=\"form.introduction\" :maxlength=\"240\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"群公告\">\r\n        <el-input type=\"textarea\" v-model=\"form.notification\" :maxlength=\"300\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"加群方式\">\r\n        <el-radio-group v-model=\"form.joinOption\" :disabled=\"joinOptionDisabled\">\r\n          <el-radio label=\"FreeAccess\">自由加群</el-radio>\r\n          <el-radio label=\"NeedPermission\">需要验证</el-radio>\r\n          <el-radio label=\"DisableApply\">禁止加群</el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      <el-form-item label=\"群成员列表\">\r\n        <el-select\r\n          v-model=\"form.memberList\"\r\n          default-first-option\r\n          multiple\r\n          filterable\r\n          remote\r\n          :disabled=\"form.type === 'AVChatRoom'\"\r\n          :remote-method=\"handleSearchUser\"\r\n          :loading=\"loading\"\r\n          placeholder=\"请输入群成员 userID\"\r\n        >\r\n          <el-option v-for=\"item in options\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div slot=\"footer\">\r\n      <el-button type=\"primary\" @click=\"onSubmit('createGroupForm')\">立即创建</el-button>\r\n      <el-button @click=\"closeCreateGroupModel\">取消</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  Form,\r\n  FormItem,\r\n  Input,\r\n  Select,\r\n  Option,\r\n  Radio,\r\n  RadioGroup\r\n} from 'element-ui'\r\nexport default {\r\n  components: {\r\n    ElForm: Form,\r\n    ElFormItem: FormItem,\r\n    ElInput: Input,\r\n    ElSelect: Select,\r\n    ElOption: Option,\r\n    ElRadioGroup: RadioGroup,\r\n    ElRadio: Radio\r\n  },\r\n  data() {\r\n    return {\r\n      form: {\r\n        groupID: '',\r\n        name: '',\r\n        type: 'Private',\r\n        avatar: '',\r\n        introduction: '',\r\n        notification: '',\r\n        joinOption: 'FreeAccess',\r\n        memberList: []\r\n      },\r\n      options: [],\r\n      loading: false,\r\n      rules: {\r\n        name: [{ required: true, message: '请输入群名称', trigger: 'blur' }]\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    joinOptionDisabled() {\r\n      return [\r\n        this.TIM.TYPES.GRP_PRIVATE,\r\n        this.TIM.TYPES.GRP_CHATROOM,\r\n        this.TIM.TYPES.GRP_AVCHATROOM\r\n      ].includes(this.form.type)\r\n    }\r\n  },\r\n  methods: {\r\n    onSubmit(ref) {\r\n      this.$refs[ref].validate(valid => {\r\n        if (!valid) {\r\n          return false\r\n        }\r\n        this.createGroup()\r\n      })\r\n    },\r\n    closeCreateGroupModel() {\r\n      this.$store.commit('updateCreateGroupModelVisible', false)\r\n    },\r\n    createGroup() {\r\n      this.tim.createGroup(this.getOptions()).then((imResponse) => {\r\n         this.$store.commit('showMessage', {\r\n            message: `群组：【${imResponse.data.group.name}】创建成功`,\r\n            type: 'success'\r\n          })\r\n        this.closeCreateGroupModel()\r\n      })\r\n      .catch(error => {\r\n          this.$store.commit('showMessage', {\r\n            type: 'error',\r\n            message: error.message\r\n          })\r\n        })\r\n    },\r\n    getOptions() {\r\n      let options = {\r\n        ...this.form,\r\n        memberList: this.form.memberList.map(userID => ({ userID }))\r\n      }\r\n      if (['Private', 'AVChatRoom'].includes(this.form.type)) {\r\n        delete options.joinOption\r\n      }\r\n      return options\r\n    },\r\n    handleSearchUser(userID) {\r\n      if (userID !== '') {\r\n        this.loading = true\r\n        this.tim.getUserProfile({ userIDList: [userID] }).then(({ data }) => {\r\n          this.options = data.map(item => item.userID)\r\n          this.loading = false\r\n        })\r\n        .catch(error => {\r\n          this.$store.commit('showMessage', {\r\n            type: 'error',\r\n            message: error.message\r\n          })\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n</style>\r\n"],"sourceRoot":"src/components/group"}]}